{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/projekte/esgrown/src/components/frontier.js\";\nimport React, { Component } from \"react\";\nimport { AuthContext } from \"../AuthContext\";\nimport IndividualDashboard from \"./individual_dashboard\";\nimport CorporateDashboard from \"./corporate_dashboard\";\nimport AdminDashboard from './admin_dashboard';\nimport toast from '../util/toast';\nimport axios from 'axios';\nexport default class Frontier extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: ''\n    };\n  }\n\n  componentDidMount() {\n    const u = JSON.parse(sessionStorage.getItem(\"key\"));\n\n    if (!u.isLogged) {\n      window.location = \"/\";\n    } //make axios calls to all subscription end points and check for active ones\n    // debugger\n\n\n    if (u.sub_status_eas === 'active') {\n      axios.get(`http://localhost:5000/subscriptioneas/getsubcode/${u.id}`).then(subcode => {\n        if (subcode.data !== null) {\n          axios.get(`https://api.paystack.co/subscription/${subcode.data}`, {\n            headers: {\n              \"Authorization\": \"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\"\n            }\n          }).then(res => {\n            axios.post(`http://localhost:5000/subscriptioneas/update/substatus/${u.id}`, {\n              sub_status: res.data.data.status\n            }).then(sub => console.log(sub.data)).catch(err => console.log(err));\n            let ls = JSON.parse(sessionStorage.getItem('key'));\n            ls.sub_status_eas = res.data.data.status;\n            sessionStorage.setItem('key', JSON.stringify(ls));\n          });\n        }\n      }).catch(err => console.log(err));\n    }\n\n    if (u.sub_status_efa === 'active') {\n      axios.get(`http://localhost:5000/subscriptionefa/getsubcode/${u.id}`).then(subcode => {\n        if (subcode.data !== null) {\n          axios.get(`https://api.paystack.co/subscription/${u.id}`, {\n            headers: {\n              \"Authorization\": \"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\"\n            }\n          }).then(res => {\n            console.log(res.data.data.status);\n            axios.post(`http://localhost:5000/subscriptionefa/update/substatus/${u.id}`, {\n              sub_status: res.data.data.status\n            }).then(sub => console.log(sub.data)).catch(err => console.log(err));\n            let ls = JSON.parse(sessionStorage.getItem('key'));\n            ls.sub_status_efa = res.data.data.status;\n            sessionStorage.setItem('key', JSON.stringify(ls));\n          });\n        }\n      }).catch(err => console.log(err));\n    }\n\n    if (u.sub_status_rm === 'active') {\n      axios.get(`http://localhost:5000/subscriptionrm/getsubcode/${u.id}`).then(subcode => {\n        if (subcode.data !== null) {\n          axios.get(`https://api.paystack.co/subscription/${subcode.data}`, {\n            headers: {\n              \"Authorization\": \"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\"\n            }\n          }).then(res => {\n            console.log(res.data.data.status);\n            axios.post(`http://localhost:5000/subscriptionrm/update/substatus/${u.id}`, {\n              sub_status: res.data.data.status\n            }).then(sub => console.log(sub.data)).catch(err => console.log(err));\n            let ls = JSON.parse(sessionStorage.getItem('key'));\n            ls.sub_status_rm = res.data.data.status;\n            sessionStorage.setItem('key', JSON.stringify(ls));\n          });\n        }\n      }).catch(err => console.log(err));\n    }\n\n    if (u.sub_status_lm === 'active') {\n      axios.get(`http://localhost:5000/subscriptionlm/getsubcode/${u.id}`).then(subcode => {\n        if (subcode.data !== null) {\n          axios.get(`https://api.paystack.co/subscription/${subcode.data}`, {\n            headers: {\n              \"Authorization\": \"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\"\n            }\n          }).then(res => {\n            console.log(res.data.data.status);\n            axios.post(`http://localhost:5000/subscriptionlm/update/substatus/${u.id}`, {\n              sub_status: res.data.data.status\n            }).then(sub => console.log(sub.data)).catch(err => console.log(err));\n            let ls = JSON.parse(sessionStorage.getItem('key'));\n            ls.sub_status_lm = res.data.data.status;\n            sessionStorage.setItem('key', JSON.stringify(ls));\n          });\n        }\n      }).catch(err => console.log(err));\n    }\n\n    if (u.sub_status_compt_mgt === 'active') {\n      axios.get(`http://localhost:5000/competence/management/getuser/${u.id}`).then(res => {\n        const today = Date.now();\n        const endDate = res.data.end_date;\n\n        if (today > endDate) {\n          let ls = JSON.parse(sessionStorage.getItem('key'));\n          ls.sub_status_compt_mgt = 'completed';\n          sessionStorage.setItem('key', JSON.stringify(ls));\n          axios.post(`http://localjost:5000/competence/management/substatus/${u.id}`, {\n            sub_status: 'completed'\n          }).then(status => console.log(status)).catch(err => console.log(err));\n        }\n\n        console.log(res.data);\n      }).catch(err => console.log(err));\n    }\n\n    if (u.sub_status_eas === 'completed') {\n      toast('your Education Advisory Service subscription has expired. Please subscribe to continue to receive service', 'info');\n    }\n\n    if (u.sub_status_efa === 'completed') {\n      toast('your Education Financial Advisory subscription has expired. Please subscribe to continue to receive service', 'info');\n    }\n\n    if (u.sub_status_rm === 'completed') {\n      toast('your Recruitment Management subscription has expired. Please subscribe to continue to receive service', 'info');\n    }\n\n    if (u.sub_status_lm === 'completed') {\n      toast('your Leadership Management subscription has expired. Please subscribe to continue to receive service', 'info');\n    }\n\n    if (u.sub_status_compt_mgt === 'completed') {\n      toast('your Competence Management subscription has expired. Please inform your organization pay to continue to receive service', 'info');\n    }\n\n    console.log(u);\n  }\n\n  render() {\n    return React.createElement(AuthContext.Consumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, context => context.data.status == \"corporate\" ? React.createElement(CorporateDashboard, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }) : context.data.status == \"ADMIN\" ? React.createElement(AdminDashboard, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }) : React.createElement(IndividualDashboard, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }));\n  }\n\n} // class CorporateDashboard extends Component{\n//     constructor(props){\n//         super(props);\n//         this.state = {\n//             org_name:'',\n//             email:'',\n//             phone:'',\n//             country:'',\n//             state:''\n//         }\n//     }\n//     componentDidMount(){\n//         const u = JSON.parse(sessionStorage.getItem(\"corp_key\"));\n//         if(!(u.isLogged)){\n//             window.location = \"/\"\n//         }\n//         console.log(u)\n//     }\n//     render(){\n//         return(\n//             <AuthContext.Consumer>\n//                 {\n//                         (context) => (\n//                             (context.c_data) ?\n//                             <div>\n//                                 Corporate Dashboard: {context.c_data.cname}\n//                             </div>\n//                             : window.location = \"/\"\n//                         )\n//                 }   \n//             </AuthContext.Consumer>\n//         );\n//     }\n// };\n// class IndividualDashboard extends Component{\n//     constructor(props){\n//         super(props);\n//         this.state = {\n//             fullname : '',\n//         }\n//     }\n//     componentDidMount(){\n//         const u = JSON.parse(sessionStorage.getItem(\"key\"));\n//         if(!(u.isLogged)){\n//             window.location = \"/\"\n//         }\n//         console.log(u)\n//     }\n//     render(){\n//         return(\n//             <AuthContext.Consumer>\n//                 {\n//                         (context) => (\n//                             (context.data) ?\n//                             <div>\n//                                 Individual Dashboard: {context.data.fullname}\n//                             </div>\n//                             : window.location = \"/\"\n//                         )\n//                 }   \n//             </AuthContext.Consumer>\n//         );\n//     }\n// }","map":{"version":3,"sources":["/Users/mac/Desktop/projekte/esgrown/src/components/frontier.js"],"names":["React","Component","AuthContext","IndividualDashboard","CorporateDashboard","AdminDashboard","toast","axios","Frontier","constructor","props","state","name","componentDidMount","u","JSON","parse","sessionStorage","getItem","isLogged","window","location","sub_status_eas","get","id","then","subcode","data","headers","res","post","sub_status","status","sub","console","log","catch","err","ls","setItem","stringify","sub_status_efa","sub_status_rm","sub_status_lm","sub_status_compt_mgt","today","Date","now","endDate","end_date","render","context"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { AuthContext } from \"../AuthContext\";\nimport IndividualDashboard from \"./individual_dashboard\";\nimport CorporateDashboard from \"./corporate_dashboard\";\nimport AdminDashboard from './admin_dashboard';\nimport toast from '../util/toast';\nimport axios from 'axios';\n\n\n\n\n\nexport default class Frontier extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            name: '',\n        }\n    }\n\n    componentDidMount() {\n        const u = JSON.parse(sessionStorage.getItem(\"key\"));\n\n        if (!(u.isLogged)) {\n            window.location = \"/\"\n        }\n        //make axios calls to all subscription end points and check for active ones\n        // debugger\n\n        if (u.sub_status_eas === 'active') {\n            axios.get(`http://localhost:5000/subscriptioneas/getsubcode/${u.id}`)\n                .then(subcode => {\n                    if (subcode.data !== null) {\n                        axios.get(`https://api.paystack.co/subscription/${subcode.data}`, { headers: { \"Authorization\": \"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\" } })\n                            .then(res => {\n                                axios.post(`http://localhost:5000/subscriptioneas/update/substatus/${u.id}`, { sub_status: res.data.data.status })\n                                    .then(sub => console.log(sub.data)).catch(err => console.log(err))\n                                let ls = JSON.parse(sessionStorage.getItem('key'));\n                                ls.sub_status_eas = res.data.data.status;\n                                sessionStorage.setItem('key', JSON.stringify(ls));\n                            })\n                    }\n                }).catch(err => console.log(err));\n        }\n\n        if (u.sub_status_efa === 'active') {\n            axios.get(`http://localhost:5000/subscriptionefa/getsubcode/${u.id}`)\n                .then(subcode => {\n                    if (subcode.data !== null) {\n                        axios.get(`https://api.paystack.co/subscription/${u.id}`, { headers: { \"Authorization\": \"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\" } })\n                            .then(res => {\n                                console.log(res.data.data.status);\n                                axios.post(`http://localhost:5000/subscriptionefa/update/substatus/${u.id}`, { sub_status: res.data.data.status })\n                                    .then(sub => console.log(sub.data)).catch(err => console.log(err))\n                                let ls = JSON.parse(sessionStorage.getItem('key'));\n                                ls.sub_status_efa = res.data.data.status;\n                                sessionStorage.setItem('key', JSON.stringify(ls));\n                            })\n                    }\n                }).catch(err => console.log(err));\n        }\n\n        if (u.sub_status_rm === 'active') {\n            axios.get(`http://localhost:5000/subscriptionrm/getsubcode/${u.id}`)\n                .then(subcode => {\n                    if (subcode.data !== null) {\n                        axios.get(`https://api.paystack.co/subscription/${subcode.data}`, { headers: { \"Authorization\": \"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\" } })\n                            .then(res => {\n                                console.log(res.data.data.status);\n                                axios.post(`http://localhost:5000/subscriptionrm/update/substatus/${u.id}`, { sub_status: res.data.data.status })\n                                    .then(sub => console.log(sub.data)).catch(err => console.log(err))\n                                let ls = JSON.parse(sessionStorage.getItem('key'));\n                                ls.sub_status_rm = res.data.data.status;\n                                sessionStorage.setItem('key', JSON.stringify(ls));\n                            })\n                    }\n                }).catch(err => console.log(err));\n        }\n\n        if (u.sub_status_lm === 'active') {\n            axios.get(`http://localhost:5000/subscriptionlm/getsubcode/${u.id}`)\n                .then(subcode => {\n                    if (subcode.data !== null) {\n                        axios.get(`https://api.paystack.co/subscription/${subcode.data}`, { headers: { \"Authorization\": \"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\" } })\n                            .then(res => {\n                                console.log(res.data.data.status);\n                                axios.post(`http://localhost:5000/subscriptionlm/update/substatus/${u.id}`, { sub_status: res.data.data.status })\n                                    .then(sub => console.log(sub.data)).catch(err => console.log(err))\n                                let ls = JSON.parse(sessionStorage.getItem('key'));\n                                ls.sub_status_lm = res.data.data.status;\n                                sessionStorage.setItem('key', JSON.stringify(ls));\n                            })\n                    }\n                }).catch(err => console.log(err));\n        }\n\n\n        if (u.sub_status_compt_mgt === 'active') {\n            axios.get(`http://localhost:5000/competence/management/getuser/${u.id}`)\n                .then(res => {\n                    const today = Date.now();\n                    const endDate = res.data.end_date;\n                    if (today > endDate) {\n\n                        let ls = JSON.parse(sessionStorage.getItem('key'));\n                        ls.sub_status_compt_mgt = 'completed';\n                        sessionStorage.setItem('key', JSON.stringify(ls));\n\n\n                        axios.post(`http://localjost:5000/competence/management/substatus/${u.id}`, { sub_status: 'completed' })\n                            .then(status => console.log(status))\n                            .catch(err => console.log(err));\n                    }\n                    console.log(res.data)\n                }).catch(err => console.log(err))\n        }\n\n        if (u.sub_status_eas === 'completed') {\n            toast('your Education Advisory Service subscription has expired. Please subscribe to continue to receive service', 'info')\n        }\n        if (u.sub_status_efa === 'completed') {\n            toast('your Education Financial Advisory subscription has expired. Please subscribe to continue to receive service', 'info')\n        }\n        if (u.sub_status_rm === 'completed') {\n            toast('your Recruitment Management subscription has expired. Please subscribe to continue to receive service', 'info')\n        }\n        if (u.sub_status_lm === 'completed') {\n            toast('your Leadership Management subscription has expired. Please subscribe to continue to receive service', 'info')\n        }\n        if (u.sub_status_compt_mgt === 'completed') {\n            toast('your Competence Management subscription has expired. Please inform your organization pay to continue to receive service', 'info')\n        }\n        console.log(u)\n    }\n\n    render() {\n        return (\n            <AuthContext.Consumer>\n                {\n                    (context) => (\n\n                        (context.data.status == \"corporate\") ? <CorporateDashboard /> : (context.data.status == \"ADMIN\") ? <AdminDashboard /> : <IndividualDashboard />\n                    )\n                }\n            </AuthContext.Consumer>\n\n        );\n    }\n}\n\n\n\n\n\n// class CorporateDashboard extends Component{\n//     constructor(props){\n//         super(props);\n//         this.state = {\n//             org_name:'',\n//             email:'',\n//             phone:'',\n//             country:'',\n//             state:''\n//         }\n//     }\n\n//     componentDidMount(){\n//         const u = JSON.parse(sessionStorage.getItem(\"corp_key\"));\n//         if(!(u.isLogged)){\n//             window.location = \"/\"\n//         }\n//         console.log(u)\n//     }\n\n\n//     render(){\n//         return(\n//             <AuthContext.Consumer>\n//                 {\n//                         (context) => (\n//                             (context.c_data) ?\n//                             <div>\n//                                 Corporate Dashboard: {context.c_data.cname}\n//                             </div>\n//                             : window.location = \"/\"\n//                         )\n//                 }   \n//             </AuthContext.Consumer>\n//         );\n//     }\n// };\n\n\n\n\n// class IndividualDashboard extends Component{\n\n//     constructor(props){\n//         super(props);\n//         this.state = {\n//             fullname : '',\n//         }\n//     }\n\n//     componentDidMount(){\n//         const u = JSON.parse(sessionStorage.getItem(\"key\"));\n//         if(!(u.isLogged)){\n//             window.location = \"/\"\n//         }\n//         console.log(u)\n//     }\n\n//     render(){\n//         return(\n//             <AuthContext.Consumer>\n//                 {\n//                         (context) => (\n//                             (context.data) ?\n//                             <div>\n//                                 Individual Dashboard: {context.data.fullname}\n//                             </div>\n//                             : window.location = \"/\"\n//                         )\n//                 }   \n//             </AuthContext.Consumer>\n\n//         );\n//     }\n// }"]},"metadata":{},"sourceType":"module"}