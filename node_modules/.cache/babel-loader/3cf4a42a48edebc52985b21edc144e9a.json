{"ast":null,"code":"import _slicedToArray from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Spinner}from'react-bootstrap';import Card from'@material-ui/core/Card';import CardActionArea from'@material-ui/core/CardActionArea';import CardActions from'@material-ui/core/CardActions';import CardContent from'@material-ui/core/CardContent';import CardMedia from'@material-ui/core/CardMedia';import Button from'@material-ui/core/Button';import Typography from'@material-ui/core/Typography';import axios from'axios';import GenServiceCard from'./gen_service_card';var RMService=function RMService(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),jobs=_useState8[0],setJobs=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),page=_useState10[0],setPage=_useState10[1];//get data from api\nuseEffect(function(){var user=JSON.parse(sessionStorage.getItem('key'));setUser(user);console.log(user);if(user.sub_status_rm==='active'){setJobs(user.jobs);}// axios.get(`http://localhost:5000/servicecontentrm/`)\n//     .then(res => {\n//         if (user.status === \"individual\" && user.org_type === \"school\" && user.sub_status === \"active\") {\n//             const teacherData = res.data.filter(d => {\n//                 return d.user_class === 'teacher'\n//             })\n//             setData(teacherData);\n//         } else if (user.status === 'individual' && user.org_type === \"company\" && user.sub_status === \"active\") {\n//             const staffData = res.data.filter(d => {\n//                 return d.user_class === 'company-staff'\n//             })\n//             setData(staffData);\n//         } else if (user.status === 'individual' && user.org_type === null) {\n//             const indiv = res.data.filter(d => {\n//                 return d.user_class === 'individual'\n//             })\n//             setData(indiv);\n//         }\n//         setSpinner(false);\n//     })\n//     .catch(err => console.log(err))\n},[]);return(// <div className=\"container\">\n//     <div className=\"row\">\n//         <div className=\"col col-lg-12 col-sm-6\" style={{ width: '100%', height: 500, boxShadow: '0px 0px 5px 5px rgba(0,0,0,0.15)', background: '#ffffff', padding: '20px', borderRadius: '10px', overflow: 'scroll' }}>\n//             <div className=\"\">\n//                 <div>\n//                     {spinner ? <Spinner animation=\"grow\" /> : data.map((data) => {\n//                         return (\n//                             <div className=\"container\">\n//                                 <div className=\"row\">\n//                                     <div className=\"col-md-8 offset-md-2\" >\n//                                         <div className=\"card\" style={{ fontFamily: 'Roboto,sans-serif', boxShadow: '0px 0px 5px 5px rgba(0,0,0,0.15)', marginBottom: '10px' }}>\n//                                             <div className=\"card-content\" style={{ padding: '10px' }}>\n//                                                 {/* <img className=\"img-responsive\" src=\"http://lorempixel.com/555/300/sports\" alt=\"placeholder\" style={{ width: '100%' }} /> */}\n//                                                 {\n//                                                     data.media ? data.media.split('/')[0] === \"data:image\" ? <img src={data.media} style={{ width: '100%' }} alt=\"\" /> : <video src={data.media} controls style={{ width: '100%' }}></video> : ''\n//                                                 }\n//                                                 <h6>{data.title}</h6>\n//                                                 <p>{data.body}</p>\n//                                             </div>\n//                                         </div>\n//                                     </div>\n//                                 </div>\n//                             </div>\n//                         )\n//                     })}\n//                 </div>\n//             </div>\n//         </div>\n//     </div>\n// </div>\nReact.createElement(\"div\",null,// spinner ? <div className=\"d-flex justify-content-center\"><i className=\"fa fa-spinner fa-spin\"></i></div> : data.map((data) => {\n//         return (\n//             <GenServiceCard data={data}/>\n//         )})\npage===0?jobs.length===0?React.createElement(\"p\",null,\"you have not applied for any jobs yet\"):jobs.map(function(item){return React.createElement(Card,{className:\"mt-5\",style:{width:'50%'}},React.createElement(CardActionArea,null,React.createElement(CardContent,null,React.createElement(Typography,{gutterBottom:true,variant:\"\",component:\"p\"},item.job_title),React.createElement(Typography,{variant:\"body2\",color:\"textSecondary\",component:\"p\"},React.createElement(\"div\",{className:\"btn btn-info bt-sm\",onClick:getContent(item.job_id),disabled:loading},\"View Content \",loading?React.createElement(\"i\",{className:\"fa fa-spinner fa-spin\"}):\"\")))),React.createElement(CardActions,null));}):page===1?React.createElement(GenServiceCard,{data:data,goBack:goBack()}):'default empty'));function getContent(id){// get contents from rm service content endpoint, based on job id\ntry{setLoading(true);axios.get(\"http://localhost:5000/corpservicecontent/\".concat(id)).then(function(res){setLoading(false);setData(res.data);setPage(1);}).catch(function(err){console.log(err);setLoading(false);});}catch(error){}}function goBack(){setPage(0);}};export default RMService;","map":{"version":3,"sources":["/Users/mac/Desktop/esgrown/src/components/ind_dashboard_components/services-components/service-cards/rmservice.js"],"names":["React","useEffect","useState","Spinner","Card","CardActionArea","CardActions","CardContent","CardMedia","Button","Typography","axios","GenServiceCard","RMService","loading","setLoading","data","setData","user","setUser","jobs","setJobs","page","setPage","JSON","parse","sessionStorage","getItem","console","log","sub_status_rm","length","map","item","width","job_title","getContent","job_id","goBack","id","get","then","res","catch","err","error"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Spinner } from 'react-bootstrap';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport axios from 'axios';\nimport GenServiceCard from './gen_service_card';\n\n\n\n\nconst RMService = () => {\n\n    const [loading, setLoading] = useState(false)\n    const [data, setData] = useState([])\n    const [user, setUser] = useState('');\n    const [jobs, setJobs] = useState([]);\n    const [page, setPage] = useState(0);\n\n\n\n    //get data from api\n    useEffect(() => {\n        const user = JSON.parse(sessionStorage.getItem('key'));\n        setUser(user);\n        console.log(user)\n\n        if (user.sub_status_rm === 'active') {\n            setJobs(user.jobs);\n        }\n            \n\n        // axios.get(`http://localhost:5000/servicecontentrm/`)\n        //     .then(res => {\n        //         if (user.status === \"individual\" && user.org_type === \"school\" && user.sub_status === \"active\") {\n\n        //             const teacherData = res.data.filter(d => {\n        //                 return d.user_class === 'teacher'\n        //             })\n        //             setData(teacherData);\n\n        //         } else if (user.status === 'individual' && user.org_type === \"company\" && user.sub_status === \"active\") {\n\n        //             const staffData = res.data.filter(d => {\n        //                 return d.user_class === 'company-staff'\n        //             })\n        //             setData(staffData);\n\n        //         } else if (user.status === 'individual' && user.org_type === null) {\n\n        //             const indiv = res.data.filter(d => {\n        //                 return d.user_class === 'individual'\n        //             })\n        //             setData(indiv);\n        //         }\n        //         setSpinner(false);\n        //     })\n        //     .catch(err => console.log(err))\n    }, []);\n\n\n\n    return (\n        // <div className=\"container\">\n        //     <div className=\"row\">\n        //         <div className=\"col col-lg-12 col-sm-6\" style={{ width: '100%', height: 500, boxShadow: '0px 0px 5px 5px rgba(0,0,0,0.15)', background: '#ffffff', padding: '20px', borderRadius: '10px', overflow: 'scroll' }}>\n        //             <div className=\"\">\n        //                 <div>\n        //                     {spinner ? <Spinner animation=\"grow\" /> : data.map((data) => {\n\n        //                         return (\n        //                             <div className=\"container\">\n        //                                 <div className=\"row\">\n        //                                     <div className=\"col-md-8 offset-md-2\" >\n        //                                         <div className=\"card\" style={{ fontFamily: 'Roboto,sans-serif', boxShadow: '0px 0px 5px 5px rgba(0,0,0,0.15)', marginBottom: '10px' }}>\n        //                                             <div className=\"card-content\" style={{ padding: '10px' }}>\n        //                                                 {/* <img className=\"img-responsive\" src=\"http://lorempixel.com/555/300/sports\" alt=\"placeholder\" style={{ width: '100%' }} /> */}\n        //                                                 {\n        //                                                     data.media ? data.media.split('/')[0] === \"data:image\" ? <img src={data.media} style={{ width: '100%' }} alt=\"\" /> : <video src={data.media} controls style={{ width: '100%' }}></video> : ''\n        //                                                 }\n        //                                                 <h6>{data.title}</h6>\n        //                                                 <p>{data.body}</p>\n        //                                             </div>\n        //                                         </div>\n\n        //                                     </div>\n        //                                 </div>\n        //                             </div>\n        //                         )\n        //                     })}\n        //                 </div>\n        //             </div>\n        //         </div>\n        //     </div>\n        // </div>\n\n        <div>\n            {\n                // spinner ? <div className=\"d-flex justify-content-center\"><i className=\"fa fa-spinner fa-spin\"></i></div> : data.map((data) => {\n                //         return (\n                //             <GenServiceCard data={data}/>\n                //         )})\n                (page === 0) ? \n                (jobs.length === 0) ? <p>you have not applied for any jobs yet</p>\n                    :\n                    jobs.map(item => {              \n                        return (\n                            <Card className=\"mt-5\" style={{width:'50%'}}>\n                                <CardActionArea>\n                                    <CardContent >\n                                        <Typography gutterBottom variant=\"\" component=\"p\">\n                                            {item.job_title}\n                                        </Typography>\n                                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                                            <div className=\"btn btn-info bt-sm\" onClick={getContent(item.job_id)} disabled={loading}>View Content {loading ? <i className=\"fa fa-spinner fa-spin\"></i>:\"\" }</div>\n                                        </Typography>\n                                    </CardContent>\n                                </CardActionArea>\n                                <CardActions>\n                                </CardActions>\n                            </Card>\n                        );\n                    }) : \n                    (page === 1) ? \n                        <GenServiceCard data={data} goBack={goBack()}/>\n                        :'default empty'\n                \n            }\n        </div>\n\n    );\n\n    function getContent(id) {\n        // get contents from rm service content endpoint, based on job id\n        try {\n            setLoading(true);\n            axios.get(`http://localhost:5000/corpservicecontent/${id}`)\n                .then(res => { \n                    setLoading(false);\n                    setData(res.data);\n                    setPage(1)\n                })\n                .catch(err => {\n                    console.log(err);\n                    setLoading(false);\n                })\n        } catch (error) {\n            \n        }\n    }\n\n    function goBack() {\n        setPage(0);\n    }\n}\n\nexport default RMService;\n"]},"metadata":{},"sourceType":"module"}