{"ast":null,"code":"import _defineProperty from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import{Card,CardContent}from'@material-ui/core';import{Spinner}from'react-bootstrap';var NewContent=function NewContent(props){var _useState=useState('title','content','publish','publish_later','user_class'),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedFile=_useState4[0],setSelectedFile=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),spinner=_useState6[0],setSpinner=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),admin=_useState8[0],setAdmin=_useState8[1];useEffect(function(){var admin=JSON.parse(sessionStorage.getItem(\"key\"));setAdmin(admin.id);},[]);var handleChange=function handleChange(e){var name=e.target.name;var value=e.target.value;setData(_objectSpread({},data,_defineProperty({},name,value)));};var selectImage=function selectImage(e){var file=e.target.files[0];var reader=new FileReader();reader.onloadend=function(){setSelectedFile(reader.result);};reader.readAsDataURL(file);};var handleSubmit=function handleSubmit(e){var _setData;setSpinner(true);e.preventDefault();var submitData={title:data.title,content:data.content,is_published:data.publish===\"YES\"?true:false,date_to_publish:data.publish_later===undefined?null:data.publish_later,media:selectedFile,admin_id:admin,user_class:data.user_class};axios.post(props.url,submitData).then(function(res){console.log(res.data);setSpinner(false);alert('new content created');}).catch(function(err){setSpinner(false);alert('OOPS! :'+err);});setData((_setData={title:'',content:'',publish:'',publish_later:''},_defineProperty(_setData,\"content\",''),_defineProperty(_setData,\"user_class\",''),_setData));};return React.createElement(React.Fragment,null,React.createElement(Card,{className:\"col col-lg-6 col-sm-6\"},React.createElement(CardContent,null,React.createElement(\"h6\",null,props.title),React.createElement(\"form\",{className:\"container py-4\"},React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Content Title\"),React.createElement(\"input\",{type:\"text\",name:\"title\",value:data.title,onChange:handleChange,placeholder:\"Content Title\",className:\"form-control\",required:true}))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Publish Now\"),React.createElement(\"select\",{name:\"publish\",onChange:handleChange,className:\"form-control\",required:true},React.createElement(\"option\",{value:\"NO\",selected:true},\"NO\"),React.createElement(\"option\",{value:\"YES\"},\"YES\")))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Publish later\"),React.createElement(\"input\",{type:\"date\",name:\"publish_later\",disabled:data.publish==\"YES\"?true:false,value:data.publish_later,onChange:handleChange,className:\"form-control\"}))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"User Class\"),React.createElement(\"select\",{name:\"user_class\",onChange:handleChange,className:\"form-control\",required:true},React.createElement(\"option\",{value:\"primary\"},\"Elementary / Primary\"),React.createElement(\"option\",{value:\"secondary\"},\"Secondary / HighSchool\"),React.createElement(\"option\",{value:\"undergraduate\"},\"Undergraduate\")))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Image / Video\"),React.createElement(\"input\",{type:\"file\",name:\"image\",onChange:selectImage,accept:\"image/*,video/*\",className:\"form-control\"}))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Content\"),React.createElement(\"textarea\",{name:\"content\",onChange:handleChange,className:\"form-control\",rows:\"10\",placeholder:\"content body\"},data.content))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"button\",{className:\"btn font-weight-light mt-3 py-2 w-100 border-0\",style:{background:'#21A5E7',color:'white'},onClick:handleSubmit},spinner?React.createElement(Spinner,{as:\"span\",animation:\"grow\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"}):\"Create\")))))));};export default NewContent;","map":{"version":3,"sources":["/Users/mac/Desktop/esgrown/src/components/admin/services/eas/newcontent.js"],"names":["React","useState","useEffect","axios","Card","CardContent","Spinner","NewContent","props","data","setData","selectedFile","setSelectedFile","spinner","setSpinner","admin","setAdmin","JSON","parse","sessionStorage","getItem","id","handleChange","e","name","target","value","selectImage","file","files","reader","FileReader","onloadend","result","readAsDataURL","handleSubmit","preventDefault","submitData","title","content","is_published","publish","date_to_publish","publish_later","undefined","media","admin_id","user_class","post","url","then","res","console","log","alert","catch","err","fontWeight","background","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Card, CardContent } from '@material-ui/core';\nimport { Spinner } from 'react-bootstrap';\n\n\n\nconst NewContent = (props) => {\n\n    const [data, setData] = useState(\n        'title',\n        'content',\n        'publish',\n        'publish_later',\n        'user_class'\n    )\n\n    const [selectedFile, setSelectedFile] = useState(null);\n\n\n    const [spinner, setSpinner] = useState(false)\n\n    const [admin, setAdmin] = useState();\n\n    useEffect(() => {\n        const admin = JSON.parse(sessionStorage.getItem(\"key\"));\n\n        setAdmin(admin.id)\n\n    }, []);\n\n    const handleChange = (e) => {\n        const name = e.target.name;\n        const value = e.target.value;\n        setData({\n            ...data,\n            [name]: value\n        })\n\n    }\n\n\n\n    const selectImage = (e) => {\n        var file = e.target.files[0];\n        var reader = new FileReader();\n\n        reader.onloadend = function () {\n            setSelectedFile(reader.result)\n        }\n        reader.readAsDataURL(file);\n    }\n\n\n    const handleSubmit = (e) => {\n        setSpinner(true)\n        e.preventDefault();\n\n\n        const submitData = {\n            title: data.title,\n            content: data.content,\n            is_published: data.publish === \"YES\" ? true : false,\n            date_to_publish: data.publish_later === undefined ? null : data.publish_later,\n            media: selectedFile,\n            admin_id: admin,\n            user_class: data.user_class\n        }\n\n\n        axios.post(props.url, submitData)\n            .then(res => {\n                console.log(res.data)\n                setSpinner(false)\n                alert('new content created');\n            })\n            .catch(err => {\n                setSpinner(false);\n                alert('OOPS! :' + err)\n            });\n\n        setData({\n            title: '',\n            content: '',\n            publish: '',\n            publish_later: '',\n            content: '',\n            user_class: ''\n        })\n\n    }\n\n\n    return (\n        <>\n            <Card className=\"col col-lg-6 col-sm-6\">\n                <CardContent>\n                    <h6>{props.title}</h6>\n                    <form className=\"container py-4\">\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Content Title</label>\n                                <input type=\"text\" name=\"title\" value={data.title} onChange={handleChange} placeholder=\"Content Title\" className=\"form-control\" required />\n                            </div>\n                        </div>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Publish Now</label>\n                                <select name=\"publish\" onChange={handleChange} className=\"form-control\" required >\n                                    <option value=\"NO\" selected>NO</option>\n                                    <option value=\"YES\">YES</option>\n                                </select>\n                            </div>\n                        </div>\n\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Publish later</label>\n                                <input type=\"date\" name=\"publish_later\" disabled={data.publish == \"YES\" ? true : false} value={data.publish_later} onChange={handleChange} className=\"form-control\" />\n                            </div>\n                        </div>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>User Class</label>\n                                <select name=\"user_class\" onChange={handleChange} className=\"form-control\" required >\n                                    <option value=\"primary\">Elementary / Primary</option>\n                                    <option value=\"secondary\">Secondary / HighSchool</option>\n                                    <option value=\"undergraduate\">Undergraduate</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Image / Video</label>\n                                <input type=\"file\" name=\"image\" onChange={selectImage} accept=\"image/*,video/*\" className=\"form-control\" />\n                            </div>\n                        </div>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Content</label>\n                                <textarea name=\"content\" onChange={handleChange} className=\"form-control\" rows=\"10\" placeholder=\"content body\" >{data.content}</textarea>\n                            </div>\n                        </div>\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <button\n                                    className=\"btn font-weight-light mt-3 py-2 w-100 border-0\"\n                                    style={{ background: '#21A5E7', color: 'white' }}\n                                    onClick={handleSubmit}\n                                >\n                                    {spinner ? <Spinner as=\"span\" animation=\"grow\" size=\"sm\" role=\"status\" aria-hidden=\"true\" /> : \"Create\"}\n                                </button>\n                            </div>\n                        </div>\n                    </form>\n                </CardContent>\n            </Card>\n        </>\n    );\n\n}\nexport default NewContent;"]},"metadata":{},"sourceType":"module"}