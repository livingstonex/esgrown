{"ast":null,"code":"import _slicedToArray from \"/Users/mac/Desktop/projekte/esgrown/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/mac/Desktop/projekte/esgrown/src/components/admin/dashboards/super-admin/components/update-privileges.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Card, CardContent, CardActionArea, Typography, CardActions } from '@material-ui/core';\nimport { Spinner } from 'react-bootstrap';\nimport Modal from './update-modal';\nimport DeleteModal from './delete-modal';\n\nconst UpdatePrivileges = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        admins = _useState2[0],\n        setAdmins = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        spinner = _useState4[0],\n        setSpinner = _useState4[1];\n\n  const _useState5 = useState([]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        adminforupdate = _useState6[0],\n        setAdminForUpdate = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        show = _useState8[0],\n        setShow = _useState8[1];\n\n  const _useState9 = useState(false),\n        _useState10 = _slicedToArray(_useState9, 2),\n        deleteUserModal = _useState10[0],\n        setDeleteUserModal = _useState10[1];\n\n  const _useState11 = useState(false),\n        _useState12 = _slicedToArray(_useState11, 2),\n        deleteUser = _useState12[0],\n        setDeleteUser = _useState12[1];\n\n  const _useState13 = useState(),\n        _useState14 = _slicedToArray(_useState13, 2),\n        privilege = _useState14[0],\n        setPrivilege = _useState14[1];\n\n  const _useState15 = useState(false),\n        _useState16 = _slicedToArray(_useState15, 2),\n        Updatespinner = _useState16[0],\n        setUpdateSpinner = _useState16[1];\n\n  const showUpdateModal = e => {\n    const adminId = e.target.getAttribute('data-id');\n    const adminObj = admins.filter(ad => {\n      return ad._id === adminId;\n    });\n    setAdminForUpdate(adminObj[0]);\n    setShow(true);\n  };\n\n  const getDelDetails = e => {\n    const adminId = e.target.getAttribute('data-id');\n    const deladminObj = admins.filter(ad => {\n      return ad._id === adminId;\n    });\n    setDeleteUser(deladminObj[0]);\n    setDeleteUserModal(true);\n  }; //get privileges to update\n\n\n  const getPrivileges = e => {\n    setPrivilege(e.target.value);\n  }; // update CA privileges\n\n\n  const updateUser = () => {\n    setUpdateSpinner(true);\n    const userId = adminforupdate._id;\n    const data = {\n      privilege: privilege.split('/')\n    };\n    axios.post(`http://localhost:5000/admin/update/${userId}`, data).then(res => {\n      if (res.data) {\n        axios.get(`http://localhost:5000/admin/country_admins`).then(res => {\n          if (res.data) {\n            setAdmins(res.data);\n          }\n        }).catch(err => console.log(err));\n      }\n\n      setUpdateSpinner(false);\n      setShow(false);\n    }).catch(err => console.log(err));\n  };\n\n  const deleteCA = () => {\n    axios.post(`http://localhost:5000/admin/delete/${deleteUser._id}`).then(res => {\n      if (res.data) {\n        //fetch admins after delete\n        axios.get(`http://localhost:5000/admin/country_admins`).then(res => {\n          if (res.data) {\n            setAdmins(res.data);\n            setDeleteUserModal(false);\n          }\n        }).catch(err => console.log(err));\n      }\n    }).catch(err => console.log(err));\n  };\n\n  console.log(privilege);\n  useEffect(() => {\n    setSpinner(true);\n    axios.get(`http://localhost:5000/admin/country_admins`).then(res => {\n      if (res.data) {\n        setAdmins(res.data);\n        setSpinner(false);\n      }\n    }).catch(err => console.log(err));\n  }, []);\n  return React.createElement(React.Fragment, null, spinner ? React.createElement(Spinner, {\n    as: \"span\",\n    animation: \"grow\",\n    size: \"sm\",\n    role: \"status\",\n    \"aria-hidden\": \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }) : React.createElement(\"div\", {\n    className: \"container mt-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, admins.map(ad => {\n    return React.createElement(\"div\", {\n      className: \"col col-lg-4 col-sm-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(Card, {\n      style: {\n        height: '310px',\n        background: '#F7F7F7',\n        marginBottom: '10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(CardContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      gutterBottom: true,\n      variant: \"\",\n      component: \"h5\",\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, ad.name)), React.createElement(\"div\", {\n      style: {\n        paddingLeft: '20px',\n        fontSize: '16px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Country:\"), React.createElement(\"div\", {\n      style: {\n        paddingLeft: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, ad.country)), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"Email:\"), React.createElement(\"div\", {\n      style: {\n        paddingLeft: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, ad.email)), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Username:\"), React.createElement(\"div\", {\n      style: {\n        paddingLeft: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, ad.username)), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Privileges:\", React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, ad.privilege.map(pri => {\n      return React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, pri);\n    }))))), React.createElement(\"div\", {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-sm btn-default pull-left\",\n      style: {\n        fontStyle: 'italic',\n        boxShadow: '1px 1px 1px 1px rgb(0,0,0,.3)',\n        marginRight: '20px'\n      },\n      \"data-id\": ad._id,\n      onClick: showUpdateModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Update\"), React.createElement(\"button\", {\n      className: \"btn btn-sm btn-default pull-right\",\n      style: {\n        fontStyle: 'italic',\n        boxShadow: '1px 1px 1px 1px rgb(0,0,0,.3)'\n      },\n      \"data-id\": ad._id,\n      onClick: getDelDetails,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Delete\")))));\n  }))), React.createElement(Modal, {\n    show: show,\n    hide: () => setShow(!show),\n    admin: adminforupdate,\n    getprivilege: getPrivileges,\n    update: updateUser,\n    spinner: Updatespinner,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }), React.createElement(DeleteModal, {\n    show: deleteUserModal,\n    hide: () => setDeleteUserModal(!deleteUserModal),\n    user: deleteUser,\n    del: deleteCA,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }));\n};\n\nexport default UpdatePrivileges;","map":{"version":3,"sources":["/Users/mac/Desktop/projekte/esgrown/src/components/admin/dashboards/super-admin/components/update-privileges.js"],"names":["React","useEffect","useState","axios","Card","CardContent","CardActionArea","Typography","CardActions","Spinner","Modal","DeleteModal","UpdatePrivileges","admins","setAdmins","spinner","setSpinner","adminforupdate","setAdminForUpdate","show","setShow","deleteUserModal","setDeleteUserModal","deleteUser","setDeleteUser","privilege","setPrivilege","Updatespinner","setUpdateSpinner","showUpdateModal","e","adminId","target","getAttribute","adminObj","filter","ad","_id","getDelDetails","deladminObj","getPrivileges","value","updateUser","userId","data","split","post","then","res","get","catch","err","console","log","deleteCA","map","height","background","marginBottom","textAlign","name","paddingLeft","fontSize","country","email","username","pri","fontStyle","boxShadow","marginRight"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Card, CardContent, CardActionArea, Typography, CardActions } from '@material-ui/core';\nimport { Spinner } from 'react-bootstrap';\nimport Modal from './update-modal';\nimport DeleteModal from './delete-modal';\n\n\n\nconst UpdatePrivileges = () => {\n\n    const [admins, setAdmins] = useState([]);\n    const [spinner, setSpinner] = useState(false);\n    const [adminforupdate, setAdminForUpdate] = useState([]);\n    const [show, setShow] = useState(false);\n    const [deleteUserModal, setDeleteUserModal] = useState(false);\n    const [deleteUser, setDeleteUser] = useState(false);\n    const [privilege, setPrivilege] = useState();\n    const [Updatespinner, setUpdateSpinner] = useState(false);\n\n\n\n\n\n\n\n    const showUpdateModal = (e) => {\n        const adminId = e.target.getAttribute('data-id');\n\n        const adminObj = admins.filter(ad => {\n            return ad._id === adminId\n        })\n\n        setAdminForUpdate(adminObj[0])\n        setShow(true)\n    }\n\n\n    const getDelDetails = (e) => {\n\n        const adminId = e.target.getAttribute('data-id');\n\n        const deladminObj = admins.filter(ad => {\n            return ad._id === adminId\n        })\n        setDeleteUser(deladminObj[0]);\n        setDeleteUserModal(true);\n\n\n    }\n\n    //get privileges to update\n    const getPrivileges = (e) => {\n\n        setPrivilege(e.target.value);\n    }\n\n    // update CA privileges\n    const updateUser = () => {\n\n\n        setUpdateSpinner(true)\n\n        const userId = adminforupdate._id;\n\n        const data = {\n            privilege: privilege.split('/')\n        }\n\n        axios.post(`http://localhost:5000/admin/update/${userId}`, data)\n            .then(res => {\n                if (res.data) {\n                        axios.get(`http://localhost:5000/admin/country_admins`)\n                            .then(res => {\n                                if (res.data) {\n                                    setAdmins(res.data);\n                                }\n                            })\n                            .catch(err => console.log(err))\n                }\n                setUpdateSpinner(false);\n                setShow(false);\n            })\n            .catch(err => console.log(err));\n    }\n\n\n\n    \n    \n    \n    const deleteCA = () => {\n\n        axios.post(`http://localhost:5000/admin/delete/${deleteUser._id}`)\n            .then(res => {\n                if (res.data) {\n\n                    //fetch admins after delete\n                    axios.get(`http://localhost:5000/admin/country_admins`)\n                        .then(res => {\n                            if (res.data) {\n                                setAdmins(res.data);\n                                setDeleteUserModal(false);\n                            }\n                        })\n                        .catch(err => console.log(err))\n                }\n            })\n            .catch(err => console.log(err))\n\n    }\n\n    console.log(privilege);\n\n    useEffect(() => {\n\n        setSpinner(true)\n        axios.get(`http://localhost:5000/admin/country_admins`)\n            .then(res => {\n                if (res.data) {\n                    setAdmins(res.data);\n                    setSpinner(false)\n\n                }\n            })\n            .catch(err => console.log(err))\n    }, []);\n\n\n    return (\n        <>\n            {\n                spinner ? <Spinner as=\"span\" animation=\"grow\" size=\"sm\" role=\"status\" aria-hidden=\"true\" />\n                    :\n                    <div className=\"container mt-5\">\n                        <div className=\"row\">\n\n                            {admins.map(ad => {\n                                return (\n\n                                    <div className=\"col col-lg-4 col-sm-6\">\n                                        <Card style={{ height: '310px', background: '#F7F7F7',marginBottom:'10px' }}>\n                                            <CardContent >\n                                                <Typography gutterBottom variant=\"\" component=\"h5\" style={{ textAlign: 'center' }}>\n                                                    <span >{ad.name}</span>\n                                                </Typography>\n\n                                                <div style={{ paddingLeft: '20px', fontSize: '16px' }}>\n                                                    <div className=\"row\" >\n                                                        <div>Country:</div>\n\n                                                        <div style={{ paddingLeft: '20px' }}>{ad.country}</div>\n                                                    </div><br />\n\n                                                    <div className=\"row\" >\n                                                        <div>Email:</div>\n\n                                                        <div style={{ paddingLeft: '20px' }}>{ad.email}</div>\n                                                    </div><br />\n\n                                                    <div className=\"row\" >\n                                                        <div>Username:</div>\n\n                                                        <div style={{ paddingLeft: '20px' }}>{ad.username}</div>\n                                                    </div><br />\n\n                                                    <div className=\"row\" >\n                                                        <div>Privileges:\n                                                                <ul>\n                                                                {ad.privilege.map(pri => {\n                                                                    return (\n                                                                        <li>{pri}</li>\n\n                                                                    );\n                                                                })}\n                                                            </ul>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div style={{ textAlign: 'center' }}>\n                                                    <button className=\"btn btn-sm btn-default pull-left\" style={{ fontStyle: 'italic', boxShadow: '1px 1px 1px 1px rgb(0,0,0,.3)', marginRight: '20px' }} data-id={ad._id} onClick={showUpdateModal}>Update</button>\n                                                    <button className=\"btn btn-sm btn-default pull-right\" style={{ fontStyle: 'italic', boxShadow: '1px 1px 1px 1px rgb(0,0,0,.3)' }} data-id={ad._id} onClick={getDelDetails}>Delete</button>\n                                                </div>\n                                            </CardContent>\n                                        </Card>\n                                    </div>\n\n                                );\n                            })}\n                        </div>\n                    </div>\n            }\n            <Modal show={show} hide={() => setShow(!show)} admin={adminforupdate} getprivilege={getPrivileges} update={updateUser} spinner={Updatespinner}/>\n            <DeleteModal show={deleteUserModal} hide={() => setDeleteUserModal(!deleteUserModal)} user={deleteUser} del={deleteCA} />\n        </>\n    );\n}\nexport default UpdatePrivileges;"]},"metadata":{},"sourceType":"module"}