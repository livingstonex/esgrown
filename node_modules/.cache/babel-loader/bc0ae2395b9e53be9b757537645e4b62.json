{"ast":null,"code":"import _objectSpread from \"/Users/mac/Desktop/projekte/esgrown/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/mac/Desktop/projekte/esgrown/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/mac/Desktop/projekte/esgrown/src/components/admin/services/components/new_content.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Card, CardContent } from '@material-ui/core';\nimport { Spinner } from 'react-bootstrap';\n\nconst NewContent = props => {\n  const _useState = useState('title', 'content', 'publish', 'publish_later', 'user_class'),\n        _useState2 = _slicedToArray(_useState, 2),\n        data = _useState2[0],\n        setData = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        selectedFile = _useState4[0],\n        setSelectedFile = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        spinner = _useState6[0],\n        setSpinner = _useState6[1];\n\n  const _useState7 = useState(),\n        _useState8 = _slicedToArray(_useState7, 2),\n        admin = _useState8[0],\n        setAdmin = _useState8[1];\n\n  useEffect(() => {\n    const admin = JSON.parse(sessionStorage.getItem(\"key\"));\n    setAdmin(admin.id);\n  }, []);\n\n  const handleChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setData(_objectSpread({}, data, {\n      [name]: value\n    }));\n  };\n\n  const selectImage = e => {\n    var file = e.target.files[0];\n    var reader = new FileReader();\n\n    reader.onloadend = function () {\n      setSelectedFile(reader.result);\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  const handleSubmit = e => {\n    setSpinner(true);\n    e.preventDefault();\n    const submitData = {\n      title: data.title,\n      content: data.content,\n      is_published: data.publish === \"YES\" ? true : false,\n      date_to_publish: data.publish_later === undefined ? null : data.publish_later,\n      media: selectedFile,\n      admin_id: admin,\n      user_class: data.user_class\n    };\n    axios.post(props.url, submitData).then(res => {\n      console.log(res.data);\n      setSpinner(false);\n      alert('new content created');\n    }).catch(err => {\n      setSpinner(false);\n      alert('OOPS! :' + err);\n    });\n    setData({\n      title: '',\n      content: '',\n      publish: '',\n      publish_later: '',\n      content: '',\n      user_class: ''\n    });\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(Card, {\n    className: \"col col-lg-6 col-sm-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(CardContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"h6\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, props.title), React.createElement(\"form\", {\n    className: \"container py-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, \"Content Title\"), React.createElement(\"input\", {\n    type: \"text\",\n    name: \"title\",\n    value: data.title,\n    onChange: handleChange,\n    placeholder: \"Content Title\",\n    className: \"form-control\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"Publish Now\"), React.createElement(\"select\", {\n    name: \"publish\",\n    onChange: handleChange,\n    className: \"form-control\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"NO\",\n    selected: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"NO\"), React.createElement(\"option\", {\n    value: \"YES\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, \"YES\")))), React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, \"Publish later\"), React.createElement(\"input\", {\n    type: \"date\",\n    name: \"publish_later\",\n    disabled: data.publish == \"YES\" ? true : false,\n    value: data.publish_later,\n    onChange: handleChange,\n    className: \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, \"User Class\"), React.createElement(\"select\", {\n    name: \"user_class\",\n    onChange: handleChange,\n    className: \"form-control\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"individual\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, \"Individual / Student\"), React.createElement(\"option\", {\n    value: \"teacher\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"Teacher\"), React.createElement(\"option\", {\n    value: \"company-staff\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, \"Company Staff\")))), React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, \"Image / Video\"), React.createElement(\"input\", {\n    type: \"file\",\n    name: \"image\",\n    onChange: selectImage,\n    accept: \"image/*,video/*\",\n    className: \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, \"Content\"), React.createElement(\"textarea\", {\n    name: \"content\",\n    onChange: handleChange,\n    className: \"form-control\",\n    rows: \"10\",\n    placeholder: \"content body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, data.content))), React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn font-weight-light mt-3 py-2 w-100 border-0\",\n    style: {\n      background: '#21A5E7',\n      color: 'white'\n    },\n    onClick: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, spinner ? React.createElement(Spinner, {\n    as: \"span\",\n    animation: \"grow\",\n    size: \"sm\",\n    role: \"status\",\n    \"aria-hidden\": \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }) : \"Proceed\")))))));\n};\n\nexport default NewContent;","map":{"version":3,"sources":["/Users/mac/Desktop/projekte/esgrown/src/components/admin/services/components/new_content.js"],"names":["React","useState","useEffect","axios","Card","CardContent","Spinner","NewContent","props","data","setData","selectedFile","setSelectedFile","spinner","setSpinner","admin","setAdmin","JSON","parse","sessionStorage","getItem","id","handleChange","e","name","target","value","selectImage","file","files","reader","FileReader","onloadend","result","readAsDataURL","handleSubmit","preventDefault","submitData","title","content","is_published","publish","date_to_publish","publish_later","undefined","media","admin_id","user_class","post","url","then","res","console","log","alert","catch","err","fontWeight","background","color"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react';\nimport axios from 'axios';\nimport { Card, CardContent } from '@material-ui/core';\nimport { Spinner } from 'react-bootstrap';\n\n\n\nconst NewContent = (props) => {\n\n    const [data, setData] = useState(\n        'title',\n        'content',\n        'publish',\n        'publish_later',\n        'user_class'\n    )\n\n    const [selectedFile, setSelectedFile] = useState(null);\n\n\n    const [spinner, setSpinner] = useState(false)\n\n    const [admin, setAdmin] = useState();\n\n    useEffect(() => { \n        const admin = JSON.parse(sessionStorage.getItem(\"key\"));\n\n        setAdmin(admin.id)\n\n    }, []);\n\n    const handleChange = (e) => {\n        const name = e.target.name;\n        const value = e.target.value;\n        setData({\n            ...data,\n            [name]: value\n        })\n\n    }\n\n\n\n    const selectImage = (e) => {\n        var file = e.target.files[0];\n        var reader = new FileReader();\n\n        reader.onloadend = function () {\n            setSelectedFile(reader.result)\n        }\n        reader.readAsDataURL(file);\n    }\n\n\n    const handleSubmit = (e) => {\n        setSpinner(true)\n        e.preventDefault();\n\n\n        const submitData = {\n            title: data.title,\n            content: data.content,\n            is_published: data.publish === \"YES\" ? true : false,\n            date_to_publish: data.publish_later === undefined ? null : data.publish_later,\n            media: selectedFile,\n            admin_id: admin,\n            user_class: data.user_class\n        }\n\n\n        axios.post(props.url, submitData)\n            .then(res => {\n                console.log(res.data)\n                setSpinner(false)\n                alert('new content created');\n            })\n            .catch(err => {\n                setSpinner(false);\n                alert('OOPS! :' + err)\n            });\n        \n        setData({\n            title: '',\n            content: '',\n            publish:'',\n            publish_later: '',\n            content: '',\n            user_class: ''\n            })\n\n    }\n\n\n    return (\n        <>\n            <Card className=\"col col-lg-6 col-sm-6\">\n                <CardContent>\n                    <h6>{props.title}</h6>\n                    <form className=\"container py-4\">\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Content Title</label>\n                                <input type=\"text\" name=\"title\" value={data.title} onChange={handleChange} placeholder=\"Content Title\" className=\"form-control\" required />\n                            </div>\n                        </div>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Publish Now</label>\n                                <select name=\"publish\" onChange={handleChange} className=\"form-control\" required >\n                                    <option value=\"NO\" selected>NO</option>\n                                    <option value=\"YES\">YES</option>\n                                </select>\n                            </div>\n                        </div>\n\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Publish later</label>\n                                <input type=\"date\" name=\"publish_later\" disabled={data.publish == \"YES\" ? true : false} value={data.publish_later} onChange={handleChange} className=\"form-control\" />\n                            </div>\n                        </div>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>User Class</label>\n                                <select name=\"user_class\" onChange={handleChange} className=\"form-control\" required >\n                                    <option value=\"individual\">Individual / Student</option>\n                                    <option value=\"teacher\">Teacher</option>\n                                    <option value=\"company-staff\">Company Staff</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Image / Video</label>\n                                <input type=\"file\" name=\"image\" onChange={selectImage} accept=\"image/*,video/*\" className=\"form-control\" />\n                            </div>\n                        </div>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Content</label>\n                                <textarea name=\"content\" onChange={handleChange} className=\"form-control\" rows=\"10\" placeholder=\"content body\" >{data.content}</textarea>\n                            </div>\n                        </div>\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <button\n                                    className=\"btn font-weight-light mt-3 py-2 w-100 border-0\"\n                                    style={{ background: '#21A5E7', color: 'white' }}\n                                    onClick={handleSubmit}\n                                >\n                                    {spinner ? <Spinner as=\"span\" animation=\"grow\" size=\"sm\" role=\"status\" aria-hidden=\"true\" /> : \"Proceed\"}\n                                </button>\n                            </div>\n                        </div>\n                    </form>\n                </CardContent>\n            </Card>\n        </>\n    );\n\n}\nexport default NewContent;"]},"metadata":{},"sourceType":"module"}