{"ast":null,"code":"import _objectSpread from \"/Users/mac/Desktop/projekte/esgrown/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/mac/Desktop/projekte/esgrown/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/mac/Desktop/projekte/esgrown/src/components/admin/dashboards/country-admin/components/update-privileges.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Card, CardContent, CardActionArea, Typography, CardActions } from '@material-ui/core';\nimport { Spinner } from 'react-bootstrap';\nimport Modal from './update-modal';\nimport DeleteModal from './delete-modal';\n\nconst UpdatePrivileges = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        admins = _useState2[0],\n        setAdmins = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        spinner = _useState4[0],\n        setSpinner = _useState4[1];\n\n  const _useState5 = useState([]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        adminforupdate = _useState6[0],\n        setAdminForUpdate = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        show = _useState8[0],\n        setShow = _useState8[1];\n\n  const _useState9 = useState(false),\n        _useState10 = _slicedToArray(_useState9, 2),\n        deleteUserModal = _useState10[0],\n        setDeleteUserModal = _useState10[1];\n\n  const _useState11 = useState(false),\n        _useState12 = _slicedToArray(_useState11, 2),\n        deleteUser = _useState12[0],\n        setDeleteUser = _useState12[1];\n\n  const _useState13 = useState(false),\n        _useState14 = _slicedToArray(_useState13, 2),\n        Updatespinner = _useState14[0],\n        setUpdateSpinner = _useState14[1];\n\n  const _useState15 = useState(),\n        _useState16 = _slicedToArray(_useState15, 2),\n        user = _useState16[0],\n        setUser = _useState16[1];\n\n  const _useState17 = useState({\n    EAS: false,\n    EFA: false,\n    LM: false,\n    RM: false,\n    LMExercise: false,\n    RMExercise: false,\n    AllServices: false,\n    AllExercises: false\n  }),\n        _useState18 = _slicedToArray(_useState17, 2),\n        privilege = _useState18[0],\n        setPrivilege = _useState18[1];\n\n  const showUpdateModal = e => {\n    const adminId = e.target.getAttribute('data-id');\n    const adminObj = admins.filter(ad => {\n      return ad._id === adminId;\n    });\n    setAdminForUpdate(adminObj[0]);\n    setShow(true);\n  };\n\n  const getDelDetails = e => {\n    const adminId = e.target.getAttribute('data-id');\n    const deladminObj = admins.filter(ad => {\n      return ad._id === adminId;\n    });\n    setDeleteUser(deladminObj[0]);\n    setDeleteUserModal(true);\n  }; //get privileges to update\n\n\n  const getPrivileges = event => {\n    setPrivilege(_objectSpread({}, privilege, {\n      [event.target.name]: event.target.checked\n    }));\n  }; // update Admin privileges\n\n\n  const updateUser = () => {\n    // setUpdateSpinner(true)\n    const userId = adminforupdate._id;\n    const assignedPrivileges = Object.keys(privilege).filter(pri => {\n      return privilege[pri] == true;\n    });\n    const data = {\n      privilege: assignedPrivileges\n    };\n    axios.post(`http://localhost:5000/admin/update/${userId}`, data).then(res => {\n      if (res.data) {\n        axios.post(`http://localhost:5000/admin/admins/${user.country}`).then(res => {\n          if (res.data) {\n            setAdmins(res.data);\n          }\n        }).catch(err => console.log(err));\n      }\n\n      setUpdateSpinner(false);\n      setShow(false);\n    }).catch(err => console.log(err)); //clear old values\n\n    setPrivilege({\n      EAS: false,\n      EFA: false,\n      LM: false,\n      RM: false,\n      LMExercise: false,\n      RMExercise: false,\n      AllServices: false,\n      AllExercises: false\n    });\n  };\n\n  const deleteCA = () => {\n    axios.post(`http://localhost:5000/admin/delete/${deleteUser._id}`).then(res => {\n      if (res.data) {\n        //fetch admins after delete\n        axios.post(`http://localhost:5000/admin/admins/${user.country}`).then(res => {\n          if (res.data) {\n            setAdmins(res.data);\n            setDeleteUserModal(false);\n          }\n        }).catch(err => console.log(err));\n      }\n    }).catch(err => console.log(err));\n  };\n\n  useEffect(() => {\n    const user = JSON.parse(sessionStorage.getItem(\"key\"));\n    setUser(user);\n    setSpinner(true);\n    axios.post(`http://localhost:5000/admin/admins/${user.country}`).then(res => {\n      if (res.data) {\n        setAdmins(res.data);\n        setSpinner(false);\n      }\n    }).catch(err => console.log(err));\n  }, []);\n  return React.createElement(React.Fragment, null, spinner ? React.createElement(Spinner, {\n    as: \"span\",\n    animation: \"grow\",\n    size: \"sm\",\n    role: \"status\",\n    \"aria-hidden\": \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }) : React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, admins.map(ad => {\n    return React.createElement(\"div\", {\n      className: \"col col-lg-4 col-sm-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(Card, {\n      style: {\n        height: '310px',\n        background: '#F7F7F7',\n        marginBottom: '10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(CardContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      gutterBottom: true,\n      variant: \"\",\n      component: \"h5\",\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, ad.name)), React.createElement(\"div\", {\n      style: {\n        paddingLeft: '20px',\n        fontSize: '16px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"Country:\"), React.createElement(\"div\", {\n      style: {\n        paddingLeft: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, ad.country)), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"Email:\"), React.createElement(\"div\", {\n      style: {\n        paddingLeft: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, ad.email)), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Username:\"), React.createElement(\"div\", {\n      style: {\n        paddingLeft: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, ad.username)), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"Privileges:\", React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, ad.privilege.map(pri => {\n      return React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, pri);\n    }))))), React.createElement(\"div\", {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-sm btn-default pull-left\",\n      style: {\n        fontStyle: 'italic',\n        boxShadow: '1px 1px 1px 1px rgb(0,0,0,.3)',\n        marginRight: '20px'\n      },\n      \"data-id\": ad._id,\n      onClick: showUpdateModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"Update\"), React.createElement(\"button\", {\n      className: \"btn btn-sm btn-default pull-right\",\n      style: {\n        fontStyle: 'italic',\n        boxShadow: '1px 1px 1px 1px rgb(0,0,0,.3)'\n      },\n      \"data-id\": ad._id,\n      onClick: getDelDetails,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"Delete\")))));\n  }))), React.createElement(Modal, {\n    show: show,\n    hide: () => setShow(!show),\n    admin: adminforupdate,\n    getprivilege: getPrivileges,\n    privilege: privilege,\n    update: updateUser,\n    spinner: Updatespinner,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }), React.createElement(DeleteModal, {\n    show: deleteUserModal,\n    hide: () => setDeleteUserModal(!deleteUserModal),\n    user: deleteUser,\n    del: deleteCA,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }));\n};\n\nexport default UpdatePrivileges;","map":{"version":3,"sources":["/Users/mac/Desktop/projekte/esgrown/src/components/admin/dashboards/country-admin/components/update-privileges.js"],"names":["React","useEffect","useState","axios","Card","CardContent","CardActionArea","Typography","CardActions","Spinner","Modal","DeleteModal","UpdatePrivileges","admins","setAdmins","spinner","setSpinner","adminforupdate","setAdminForUpdate","show","setShow","deleteUserModal","setDeleteUserModal","deleteUser","setDeleteUser","Updatespinner","setUpdateSpinner","user","setUser","EAS","EFA","LM","RM","LMExercise","RMExercise","AllServices","AllExercises","privilege","setPrivilege","showUpdateModal","e","adminId","target","getAttribute","adminObj","filter","ad","_id","getDelDetails","deladminObj","getPrivileges","event","name","checked","updateUser","userId","assignedPrivileges","Object","keys","pri","data","post","then","res","country","catch","err","console","log","deleteCA","JSON","parse","sessionStorage","getItem","map","height","background","marginBottom","textAlign","paddingLeft","fontSize","email","username","fontStyle","boxShadow","marginRight"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Card, CardContent, CardActionArea, Typography, CardActions, } from '@material-ui/core';\nimport { Spinner } from 'react-bootstrap';\nimport Modal from './update-modal';\nimport DeleteModal from './delete-modal';\n\n\n\nconst UpdatePrivileges = () => {\n\n    const [admins, setAdmins] = useState([]);\n    const [spinner, setSpinner] = useState(false);\n    const [adminforupdate, setAdminForUpdate] = useState([]);\n    const [show, setShow] = useState(false);\n    const [deleteUserModal, setDeleteUserModal] = useState(false);\n    const [deleteUser, setDeleteUser] = useState(false);\n    const [Updatespinner, setUpdateSpinner] = useState(false);\n    const [user, setUser] = useState();\n    const [privilege, setPrivilege] = useState({\n        EAS: false,\n        EFA: false,\n        LM: false,\n        RM: false,\n        LMExercise: false,\n        RMExercise: false,\n        AllServices: false,\n        AllExercises: false\n    });\n\n\n\n    const showUpdateModal = (e) => {\n        const adminId = e.target.getAttribute('data-id');\n\n        const adminObj = admins.filter(ad => {\n            return ad._id === adminId\n        })\n\n        setAdminForUpdate(adminObj[0])\n        setShow(true)\n    }\n\n\n    const getDelDetails = e => {\n\n        const adminId = e.target.getAttribute('data-id');\n\n        const deladminObj = admins.filter(ad => {\n            return ad._id === adminId\n        })\n        setDeleteUser(deladminObj[0]);\n        setDeleteUserModal(true);\n\n\n    }\n\n    //get privileges to update\n    const getPrivileges = event => {\n        setPrivilege({ ...privilege, [event.target.name]: event.target.checked });\n    };\n\n\n    // update Admin privileges\n    const updateUser = () => {\n\n        // setUpdateSpinner(true)\n\n        const userId = adminforupdate._id;\n\n        const assignedPrivileges = Object.keys(privilege).filter(pri => {\n            return privilege[pri] == true;\n        })\n\n        const data = {\n            privilege: assignedPrivileges\n        }\n\n\n        axios.post(`http://localhost:5000/admin/update/${userId}`, data)\n            .then(res => {\n                if (res.data) {\n\n                    axios.post(`http://localhost:5000/admin/admins/${user.country}`)\n                        .then(res => {\n                            if (res.data) {\n                                setAdmins(res.data);\n                            }\n                        })\n                        .catch(err => console.log(err))\n                }\n                setUpdateSpinner(false);\n                setShow(false);\n            })\n            .catch(err => console.log(err));\n\n        //clear old values\n        setPrivilege({\n            EAS: false,\n            EFA: false,\n            LM: false,\n            RM: false,\n            LMExercise: false,\n            RMExercise: false,\n            AllServices: false,\n            AllExercises: false\n        })\n    }\n\n\n\n\n    const deleteCA = () => {\n\n        axios.post(`http://localhost:5000/admin/delete/${deleteUser._id}`)\n            .then(res => {\n                if (res.data) {\n\n                    //fetch admins after delete\n                    axios.post(`http://localhost:5000/admin/admins/${user.country}`)\n                        .then(res => {\n                            if (res.data) {\n                                setAdmins(res.data);\n                                setDeleteUserModal(false);\n                            }\n                        })\n                        .catch(err => console.log(err))\n                }\n            })\n            .catch(err => console.log(err))\n\n    }\n\n\n\n    useEffect(() => {\n        const user = JSON.parse(sessionStorage.getItem(\"key\"));\n        setUser(user)\n\n        setSpinner(true)\n        axios.post(`http://localhost:5000/admin/admins/${user.country}`)\n            .then(res => {\n                if (res.data) {\n                    setAdmins(res.data);\n                    setSpinner(false)\n\n                }\n            })\n            .catch(err => console.log(err))\n    }, []);\n\n\n    return (\n        <>\n            {\n                spinner ? <Spinner as=\"span\" animation=\"grow\" size=\"sm\" role=\"status\" aria-hidden=\"true\" />\n                    :\n                    <div className=\"container\">\n                        <div className=\"row\">\n\n                            {admins.map(ad => {\n                                return (\n\n                                    <div className=\"col col-lg-4 col-sm-6\">\n                                        <Card style={{ height: '310px', background: '#F7F7F7', marginBottom: '10px' }}>\n                                            <CardContent >\n                                                <Typography gutterBottom variant=\"\" component=\"h5\" style={{ textAlign: 'center' }}>\n                                                    <span >{ad.name}</span>\n                                                </Typography>\n\n                                                <div style={{ paddingLeft: '20px', fontSize: '16px' }}>\n                                                    <div className=\"row\" >\n                                                        <div>Country:</div>\n\n                                                        <div style={{ paddingLeft: '20px' }}>{ad.country}</div>\n                                                    </div><br />\n\n                                                    <div className=\"row\" >\n                                                        <div>Email:</div>\n\n                                                        <div style={{ paddingLeft: '20px' }}>{ad.email}</div>\n                                                    </div><br />\n\n                                                    <div className=\"row\" >\n                                                        <div>Username:</div>\n\n                                                        <div style={{ paddingLeft: '20px' }}>{ad.username}</div>\n                                                    </div><br />\n\n                                                    <div className=\"row\" >\n                                                        <div>Privileges:\n                                                                <ul>\n                                                                {ad.privilege.map(pri => {\n                                                                    return (\n                                                                        <li>{pri}</li>\n\n                                                                    );\n                                                                })}\n                                                            </ul>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div style={{ textAlign: 'center' }}>\n                                                    <button className=\"btn btn-sm btn-default pull-left\" style={{ fontStyle: 'italic', boxShadow: '1px 1px 1px 1px rgb(0,0,0,.3)', marginRight: '20px' }} data-id={ad._id} onClick={showUpdateModal}>Update</button>\n                                                    <button className=\"btn btn-sm btn-default pull-right\" style={{ fontStyle: 'italic', boxShadow: '1px 1px 1px 1px rgb(0,0,0,.3)' }} data-id={ad._id} onClick={getDelDetails}>Delete</button>\n                                                </div>\n                                            </CardContent>\n\n                                        </Card>\n                                    </div>\n\n                                );\n                            })}\n                        </div>\n                    </div>\n            }\n            <Modal show={show} hide={() => setShow(!show)} admin={adminforupdate} getprivilege={getPrivileges} privilege={privilege} update={updateUser} spinner={Updatespinner} />\n            <DeleteModal show={deleteUserModal} hide={() => setDeleteUserModal(!deleteUserModal)} user={deleteUser} del={deleteCA} />\n        </>\n    );\n}\nexport default UpdatePrivileges;"]},"metadata":{},"sourceType":"module"}