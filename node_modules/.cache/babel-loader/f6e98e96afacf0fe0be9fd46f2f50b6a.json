{"ast":null,"code":"import _defineProperty from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import{Card,CardContent,CardHeader}from'@material-ui/core';import{Spinner}from'react-bootstrap';import Form from'react-bootstrap/Form';var CreateForm=function CreateForm(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedFile=_useState4[0],setSelectedFile=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),spinner=_useState6[0],setSpinner=_useState6[1];var _useState7=useState({title:'',content:''}),_useState8=_slicedToArray(_useState7,2),formState=_useState8[0],setFormState=_useState8[1];useEffect(function(){var admin=JSON.parse(sessionStorage.getItem(\"key\"));setUser(admin);},[]);var selectImage=function selectImage(e){var file=e.target.files[0];var reader=new FileReader();reader.onloadend=function(){setSelectedFile(reader.result);};reader.readAsDataURL(file);};var handleChange=function handleChange(e){setFormState(_objectSpread({},formState,_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(){setSpinner(true);var data={tutor_id:user.id,subject:props.title,title:formState.title,content:formState.content,media:selectedFile};var subject=props.title.toLowerCase();var level=user.tutor_level.toLowerCase();axios.post(\"http://localhost:5000/\".concat(level,\"/\").concat(subject,\"/add\"),data).then(function(res){if(res.data){alert('content created successfully');setSpinner(false);}}).catch(function(err){return console.log(err);});};return React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"d-flex justify-content-around\"},React.createElement(Card,{className:\"col col-lg-6 col-sm-6\",style:{background:'#E9E9E9'}},React.createElement(CardHeader,{title:\"\".concat(props.title,\" Content\")}),React.createElement(CardContent,null,React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Title\"),React.createElement(\"input\",{type:\"text\",name:\"title\",value:formState.title,onChange:handleChange,placeholder:\"content title\",className:\"form-control text-small\",required:true}))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Image/Video\"),React.createElement(\"input\",{type:\"file\",name:\"media\",onChange:selectImage,accept:\"image/*,video/*\",className:\"form-control text-small\",required:true}))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Content\"),React.createElement(\"textarea\",{name:\"content\",rows:\"10\",value:formState.content,onChange:handleChange,className:\"form-control text-small\",placeholder:\"content\",required:true}))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"button\",{className:\"btn  mt-3 py-2 w-100 border-0\",style:{background:'#21A5E7',color:'white'},onClick:handleSubmit},spinner?React.createElement(Spinner,{as:\"span\",animation:\"grow\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"}):\"Create!\")))))));};export default CreateForm;","map":{"version":3,"sources":["/Users/mac/Desktop/esgrown/src/components/admin/dashboards/tutor/components/new-content-form.js"],"names":["React","useState","useEffect","axios","Card","CardContent","CardHeader","Spinner","Form","CreateForm","props","user","setUser","selectedFile","setSelectedFile","spinner","setSpinner","title","content","formState","setFormState","admin","JSON","parse","sessionStorage","getItem","selectImage","e","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","handleChange","name","value","handleSubmit","data","tutor_id","id","subject","media","toLowerCase","level","tutor_level","post","then","res","alert","catch","err","console","log","background","fontWeight","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Card, CardContent, CardHeader } from '@material-ui/core';\nimport { Spinner } from 'react-bootstrap';\nimport Form from 'react-bootstrap/Form'\n\n\n\n\nconst CreateForm = (props) => {\n\n\n    const [user, setUser] = useState();\n    const [selectedFile, setSelectedFile] = useState(null);\n    const [spinner, setSpinner] = useState();\n    const [formState, setFormState] = useState({\n        title: '',\n        content: ''\n    })\n\n\n    useEffect(() => {\n        const admin = JSON.parse(sessionStorage.getItem(\"key\"));\n        setUser(admin)\n\n\n    }, []);\n\n\n    const selectImage = (e) => {\n        const file = e.target.files[0];\n        const reader = new FileReader();\n\n        reader.onloadend = function () {\n            setSelectedFile(reader.result)\n        }\n        reader.readAsDataURL(file);\n    }\n\n    const handleChange = (e) => {\n        setFormState({\n            ...formState,\n            [e.target.name]: e.target.value\n        })\n    }\n\n    const handleSubmit = () => {\n        setSpinner(true);\n        const data = {\n            tutor_id: user.id,\n            subject: props.title,\n            title: formState.title,\n            content: formState.content,\n            media: selectedFile\n        }\n\n        const subject = props.title.toLowerCase();\n        const level = user.tutor_level.toLowerCase();\n\n        axios.post(`http://localhost:5000/${level}/${subject}/add`, data)\n            .then(res => {\n                if (res.data) {\n                    alert('content created successfully');\n                    setSpinner(false);\n                }\n            })\n            .catch(err => console.log(err));\n\n\n    }\n\n\n    return (\n        <>\n            <div className=\"d-flex justify-content-around\">\n                <Card className=\"col col-lg-6 col-sm-6\" style={{ background: '#E9E9E9' }}>\n                    <CardHeader title={`${props.title} Content`} />\n                    <CardContent>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Title</label>\n                                <input type=\"text\" name=\"title\" value={formState.title} onChange={handleChange} placeholder=\"content title\" className=\"form-control text-small\" required />\n                            </div>\n                        </div>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Image/Video</label>\n                                <input type=\"file\" name=\"media\" onChange={selectImage} accept=\"image/*,video/*\" className=\"form-control text-small\" required />\n                            </div>\n                        </div>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Content</label>\n                                <textarea name=\"content\" rows=\"10\" value={formState.content} onChange={handleChange} className=\"form-control text-small\" placeholder=\"content\" required></textarea>\n                            </div>\n                        </div>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <button\n                                    className=\"btn  mt-3 py-2 w-100 border-0\"\n                                    style={{ background: '#21A5E7', color: 'white' }}\n                                    onClick={handleSubmit}\n                                >\n                                    {spinner ? <Spinner as=\"span\" animation=\"grow\" size=\"sm\" role=\"status\" aria-hidden=\"true\" /> : \"Create!\"}\n                                </button>\n                            </div>\n                        </div>\n                    </CardContent>\n                </Card>\n            </div>\n\n        </>\n    );\n}\nexport default CreateForm;"]},"metadata":{},"sourceType":"module"}