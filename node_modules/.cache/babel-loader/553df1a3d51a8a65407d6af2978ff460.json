{"ast":null,"code":"import _slicedToArray from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import{Modal,Spinner,Form,Button}from'react-bootstrap';import AddStaff from'../../../corp_dashboard_components/staff/components/add-staff';var AllStaff=function AllStaff(_ref){var show=_ref.show,onHide=_ref.onHide,amount=_ref.amount,closeStaffModal=_ref.closeStaffModal;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),staff=_useState2[0],setStaff=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),company=_useState4[0],setCompany=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),companystaff=_useState6[0],setCompanystaff=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),addStaff=_useState8[0],setAddStaff=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),Btn=_useState10[0],setBtn=_useState10[1];useEffect(function(){var company=JSON.parse(sessionStorage.getItem('key'));setCompany(company);// //make a request quest and get all company/school staff with sub inactive for subscription\naxios.get(\"http://localhost:5000/individuals/staff/\".concat(company.id)).then(function(res){var unsubscribedStaff=res.data.filter(function(staff){return staff.sub_status_compt_mgt==='inactive'||staff.sub_status_compt_mgt==='completed';});setCompanystaff(unsubscribedStaff);if(unsubscribedStaff.length===0){setBtn(true);}else{setBtn(false);}}).catch(function(err){return console.log(err);});},[]);var refreshStaff=function refreshStaff(){axios.get(\"http://localhost:5000/individuals/staff/\".concat(company.id)).then(function(res){var unsubscribedStaff=res.data.filter(function(staff){return staff.sub_status_compt_mgt==='inactive'||staff.sub_status_compt_mgt==='completed';});setCompanystaff(unsubscribedStaff);if(unsubscribedStaff.length===0){setBtn(true);}else{setBtn(false);}}).catch(function(err){return console.log(err);});setAddStaff(false);};return React.createElement(React.Fragment,null,React.createElement(Modal,{show:show,onHide:onHide,centered:true},React.createElement(Modal.Header,null,React.createElement(Modal.Title,null,\"Number of Staff: \",companystaff.length),React.createElement(Modal.Title,null,React.createElement(\"button\",{type:\"submit\",className:\"btn font-weight-light mt-3 mb-3 py-2 border-0\",style:{background:'#53A6E7',color:'white'},onClick:function onClick(){return setAddStaff(true);}},\"Add Staff\"))),React.createElement(\"div\",{className:\"container\"},React.createElement(\"span\",{style:{color:'#E68824',fontSize:'18px'}},\"Amount Payable: N \",amount*companystaff.length/100),React.createElement(\"hr\",null),company&&company.org_type==='school'&&company.country==\"nigeria\"?React.createElement(Form.Text,{className:\"text-muted\"},\"Deselection of Teachers for this service is unavailable for your country.\"):\"\",companystaff.map(function(staff){return React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(Form,null,React.createElement(Form.Group,{controlId:\"formBasicCheckbox\"},React.createElement(Form.Check,{type:\"checkbox\",label:staff.fullname,disabled:company&&company.org_type==='school'?true:false})))));}),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"button\",{type:\"submit\",className:\"btn font-weight-light mt-3 mb-3 py-2 w-100 border-0\",style:{background:'#53A6E7',color:'white'},onClick:function onClick(){return closeStaffModal(amount*companystaff.length);},disabled:Btn},\"Proceed to Payment\"))))),React.createElement(AddStaff,{show:addStaff,onHide:function onHide(){return setAddStaff(!addStaff);},refreshStaff:refreshStaff}));};export default AllStaff;","map":{"version":3,"sources":["/Users/mac/Desktop/esgrown/src/components/corp_dashboard_components/subscriptions/components/all-staff.js"],"names":["React","useState","useEffect","axios","Modal","Spinner","Form","Button","AddStaff","AllStaff","show","onHide","amount","closeStaffModal","staff","setStaff","company","setCompany","companystaff","setCompanystaff","addStaff","setAddStaff","Btn","setBtn","JSON","parse","sessionStorage","getItem","get","id","then","res","unsubscribedStaff","data","filter","sub_status_compt_mgt","length","catch","err","console","log","refreshStaff","background","color","fontSize","org_type","country","map","fullname"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Modal, Spinner, Form, Button } from 'react-bootstrap';\nimport AddStaff from '../../../corp_dashboard_components/staff/components/add-staff';\n\n\n\n\nconst AllStaff = ({ show, onHide, amount, closeStaffModal }) => {\n\n    const [staff, setStaff] = useState([]);\n    const [company, setCompany] = useState()\n    const [companystaff, setCompanystaff] = useState([])\n    const [addStaff, setAddStaff] = useState(false);\n    const [Btn, setBtn] = useState(false);\n\n\n\n    useEffect(() => { \n        const company = JSON.parse(sessionStorage.getItem('key'))\n        setCompany(company);\n\n        // //make a request quest and get all company/school staff with sub inactive for subscription\n        axios.get(`http://localhost:5000/individuals/staff/${company.id}`)\n            .then(res => {\n                const unsubscribedStaff = res.data.filter(staff => {\n                    return staff.sub_status_compt_mgt === 'inactive' || staff.sub_status_compt_mgt === 'completed' ;\n                })\n                setCompanystaff(unsubscribedStaff);\n                if (unsubscribedStaff.length === 0) {\n                    setBtn(true)\n                } else {\n                    setBtn(false)\n                }\n            })\n            .catch(err => console.log(err));\n\n    }, []);\n\n\n    const refreshStaff = () => {\n\n        axios.get(`http://localhost:5000/individuals/staff/${company.id}`)\n            .then(res => {\n                const unsubscribedStaff = res.data.filter(staff => {\n                    return staff.sub_status_compt_mgt === 'inactive' || staff.sub_status_compt_mgt === 'completed';\n                })\n                setCompanystaff(unsubscribedStaff);\n                if (unsubscribedStaff.length === 0) {\n                    setBtn(true)\n                } else {\n                    setBtn(false)\n                }\n            })\n            .catch(err => console.log(err));\n            setAddStaff(false)\n\n    }\n\n\n    return (\n        <>\n            <Modal show={show} onHide={onHide} centered>\n                <Modal.Header >\n                    <Modal.Title>Number of Staff: {companystaff.length}</Modal.Title>\n                    <Modal.Title>\n                        <button\n                        type=\"submit\"\n                        className=\"btn font-weight-light mt-3 mb-3 py-2 border-0\"\n                        style={{ background: '#53A6E7', color: 'white' }}\n                        onClick={() => setAddStaff(true)}\n                        >\n                            Add Staff\n                        </button>\n                        \n                    </Modal.Title>         \n                    \n                </Modal.Header>\n                \n                <div className=\"container\">\n                    <span style={{ color:'#E68824', fontSize:'18px'}}>Amount Payable: N {(amount * companystaff.length) / 100}</span>\n                    <hr/>\n                    {\n                        company && company.org_type === 'school' && company.country == \"nigeria\" ?\n                        <Form.Text className=\"text-muted\">\n                                Deselection of Teachers for this service is unavailable for your country.\n                        </Form.Text>\n                            : \"\"}\n                    \n                    {companystaff.map(staff => {\n                        return (\n                                <div className=\"row mt-3\">\n                                    <div className=\"col\">\n                                        <Form>\n                                            <Form.Group controlId=\"formBasicCheckbox\">\n                                            <Form.Check type=\"checkbox\" label={staff.fullname} disabled={company && company.org_type === 'school'? true : false} />\n                                            </Form.Group>\n                                        </Form>\n                                    </div>\n                                </div>\n                            );\n                        })}\n                    <div className=\"row mt-3\">\n                        <div className=\"col\">\n                            <button\n                                type=\"submit\"\n                                className=\"btn font-weight-light mt-3 mb-3 py-2 w-100 border-0\"\n                                style={{ background: '#53A6E7', color: 'white' }}\n                                onClick={() => closeStaffModal((amount * companystaff.length))}\n                                disabled={Btn}\n\n                            >\n                                {/* {spinner ? <Spinner as=\"span\" animation=\"grow\" size=\"sm\" role=\"status\" aria-hidden=\"true\" /> : \"Proceed\"} */}\n                                Proceed to Payment\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </Modal>\n            <AddStaff show={addStaff} onHide={() => setAddStaff(!addStaff)} refreshStaff={refreshStaff} />\n        </>\n    );\n}\nexport default AllStaff;"]},"metadata":{},"sourceType":"module"}