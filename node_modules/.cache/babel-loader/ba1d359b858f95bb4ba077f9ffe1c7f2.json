{"ast":null,"code":"import _classCallCheck from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{AuthContext}from\"../AuthContext\";import IndividualDashboard from\"./individual_dashboard\";import CorporateDashboard from\"./corporate_dashboard\";import AdminDashboard from'./admin_dashboard';import toast from'../util/toast';import axios from'axios';var Frontier=/*#__PURE__*/function(_Component){_inherits(Frontier,_Component);function Frontier(props){var _this;_classCallCheck(this,Frontier);_this=_possibleConstructorReturn(this,_getPrototypeOf(Frontier).call(this,props));_this.state={name:''};return _this;}_createClass(Frontier,[{key:\"componentDidMount\",value:function componentDidMount(){var u=JSON.parse(sessionStorage.getItem(\"key\"));if(!u.isLogged){window.location=\"/\";}//make axios calls to all subscription end points and check for active ones\n// debugger\nif(u.sub_status_eas==='active'){axios.get(\"http://localhost:5000/subscriptioneas/getsubcode/\".concat(u.id)).then(function(subcode){if(subcode.data!==null){axios.get(\"https://api.paystack.co/subscription/\".concat(subcode.data),{headers:{\"Authorization\":\"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\"}}).then(function(res){axios.post(\"http://localhost:5000/subscriptioneas/update/substatus/\".concat(u.id),{sub_status:res.data.data.status}).then(function(sub){return console.log(sub.data);}).catch(function(err){return console.log(err);});var ls=JSON.parse(sessionStorage.getItem('key'));ls.sub_status_eas=res.data.data.status;sessionStorage.setItem('key',JSON.stringify(ls));}).catch(function(err){return console.log(err);});}}).catch(function(err){return console.log(err);});}if(u.sub_status_efa==='active'){axios.get(\"http://localhost:5000/subscriptionefa/getsubcode/\".concat(u.id)).then(function(subcode){if(subcode.data!==null){axios.get(\"https://api.paystack.co/subscription/\".concat(u.id),{headers:{\"Authorization\":\"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\"}}).then(function(res){console.log(res.data.data.status);axios.post(\"http://localhost:5000/subscriptionefa/update/substatus/\".concat(u.id),{sub_status:res.data.data.status}).then(function(sub){return console.log(sub.data);}).catch(function(err){return console.log(err);});var ls=JSON.parse(sessionStorage.getItem('key'));ls.sub_status_efa=res.data.data.status;sessionStorage.setItem('key',JSON.stringify(ls));});}}).catch(function(err){return console.log(err);});}if(u.sub_status_rm==='active'){//also check for subscriptin for the corp user ie make a call to corporatesubscriptions and check for rm\naxios.get(\"http://localhost:5000/subscriptionrm/getsubcode/\".concat(u.id)).then(function(subcode){if(subcode.data!==null){axios.get(\"https://api.paystack.co/subscription/\".concat(subcode.data),{headers:{\"Authorization\":\"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\"}}).then(function(res){console.log(res.data.data.status);axios.post(\"http://localhost:5000/subscriptionrm/update/substatus/\".concat(u.id),{sub_status:res.data.data.status}).then(function(sub){return console.log(sub.data);}).catch(function(err){return console.log(err);});var ls=JSON.parse(sessionStorage.getItem('key'));ls.sub_status_rm=res.data.data.status;sessionStorage.setItem('key',JSON.stringify(ls));});}}).catch(function(err){return console.log(err);});}if(u.sub_status_lm==='active'){axios.get(\"http://localhost:5000/subscriptionlm/getsubcode/\".concat(u.id)).then(function(subcode){if(subcode.data!==null){axios.get(\"https://api.paystack.co/subscription/\".concat(subcode.data),{headers:{\"Authorization\":\"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\"}}).then(function(res){console.log(res.data.data.status);axios.post(\"http://localhost:5000/subscriptionlm/update/substatus/\".concat(u.id),{sub_status:res.data.data.status}).then(function(sub){return console.log(sub.data);}).catch(function(err){return console.log(err);});var ls=JSON.parse(sessionStorage.getItem('key'));ls.sub_status_lm=res.data.data.status;sessionStorage.setItem('key',JSON.stringify(ls));});}}).catch(function(err){return console.log(err);});}if(u.sub_status_compt_mgt==='active'){axios.get(\"http://localhost:5000/competence/management/getuser/\".concat(u.id)).then(function(res){if(res.data!==null){var today=Date.now();var endDate=res.data.end_date;if(today>endDate){var ls=JSON.parse(sessionStorage.getItem('key'));ls.sub_status_compt_mgt='completed';sessionStorage.setItem('key',JSON.stringify(ls));axios.post(\"http://localhost:5000/competence/management/update/substatus/\".concat(u.id),{sub_status:'completed'}).then(function(sta){return console.log(sta.data);}).catch(function(err){return console.log(err);});//update the individuals' doc\naxios.post(\"http://localhost:5000/individuals/update/substatus/\".concat(u.id),{sub_status_compt_mgt:'completed'}).then(function(){return console.log(\"updated\");}).catch(function(err){return console.log(err);});}console.log(res.data);}}).catch(function(err){return console.log(err);});}if(u.sub_status_eas==='completed'){toast('your Education Advisory Service subscription has expired. Please subscribe to continue to receive service','info');}if(u.sub_status_efa==='completed'){toast('your Education Financial Advisory subscription has expired. Please subscribe to continue to receive service','info');}if(u.sub_status_rm==='completed'){toast('your Recruitment Management subscription has expired. Please subscribe to continue to receive service','info');}if(u.sub_status_lm==='completed'){toast('your Leadership Management subscription has expired. Please subscribe to continue to receive service','info');}if(u.sub_status_compt_mgt==='completed'){toast('your Competence Management subscription has expired. Please inform your organization pay to continue to receive service','info');}console.log(u);}},{key:\"render\",value:function render(){return React.createElement(AuthContext.Consumer,null,function(context){return context.data.status==\"corporate\"?React.createElement(CorporateDashboard,null):context.data.status==\"ADMIN\"?React.createElement(AdminDashboard,null):React.createElement(IndividualDashboard,null);});}}]);return Frontier;}(Component);// class CorporateDashboard extends Component{\n//     constructor(props){\n//         super(props);\n//         this.state = {\n//             org_name:'',\n//             email:'',\n//             phone:'',\n//             country:'',\n//             state:''\n//         }\n//     }\n//     componentDidMount(){\n//         const u = JSON.parse(sessionStorage.getItem(\"corp_key\"));\n//         if(!(u.isLogged)){\n//             window.location = \"/\"\n//         }\n//         console.log(u)\n//     }\n//     render(){\n//         return(\n//             <AuthContext.Consumer>\n//                 {\n//                         (context) => (\n//                             (context.c_data) ?\n//                             <div>\n//                                 Corporate Dashboard: {context.c_data.cname}\n//                             </div>\n//                             : window.location = \"/\"\n//                         )\n//                 }   \n//             </AuthContext.Consumer>\n//         );\n//     }\n// };\n// class IndividualDashboard extends Component{\n//     constructor(props){\n//         super(props);\n//         this.state = {\n//             fullname : '',\n//         }\n//     }\n//     componentDidMount(){\n//         const u = JSON.parse(sessionStorage.getItem(\"key\"));\n//         if(!(u.isLogged)){\n//             window.location = \"/\"\n//         }\n//         console.log(u)\n//     }\n//     render(){\n//         return(\n//             <AuthContext.Consumer>\n//                 {\n//                         (context) => (\n//                             (context.data) ?\n//                             <div>\n//                                 Individual Dashboard: {context.data.fullname}\n//                             </div>\n//                             : window.location = \"/\"\n//                         )\n//                 }   \n//             </AuthContext.Consumer>\n//         );\n//     }\n// }\nexport{Frontier as default};","map":{"version":3,"sources":["/Users/mac/Desktop/esgrown/src/components/frontier.js"],"names":["React","Component","AuthContext","IndividualDashboard","CorporateDashboard","AdminDashboard","toast","axios","Frontier","props","state","name","u","JSON","parse","sessionStorage","getItem","isLogged","window","location","sub_status_eas","get","id","then","subcode","data","headers","res","post","sub_status","status","sub","console","log","catch","err","ls","setItem","stringify","sub_status_efa","sub_status_rm","sub_status_lm","sub_status_compt_mgt","today","Date","now","endDate","end_date","sta","context"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { AuthContext } from \"../AuthContext\";\nimport IndividualDashboard from \"./individual_dashboard\";\nimport CorporateDashboard from \"./corporate_dashboard\";\nimport AdminDashboard from './admin_dashboard';\nimport toast from '../util/toast';\nimport axios from 'axios';\n\n\n\n\n\nexport default class Frontier extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            name: '',\n        }\n    }\n\n    componentDidMount() {\n        const u = JSON.parse(sessionStorage.getItem(\"key\"));\n\n        if (!(u.isLogged)) {\n            window.location = \"/\"\n        }\n        //make axios calls to all subscription end points and check for active ones\n        // debugger\n\n        if (u.sub_status_eas === 'active') {\n            axios.get(`http://localhost:5000/subscriptioneas/getsubcode/${u.id}`)\n                .then(subcode => {\n                    if (subcode.data !== null) {\n                        axios.get(`https://api.paystack.co/subscription/${subcode.data}`, { headers: { \"Authorization\": \"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\" } })\n                            .then(res => {\n                                axios.post(`http://localhost:5000/subscriptioneas/update/substatus/${u.id}`, { sub_status: res.data.data.status })\n                                    .then(sub => console.log(sub.data)).catch(err => console.log(err))\n                                let ls = JSON.parse(sessionStorage.getItem('key'));\n                                ls.sub_status_eas = res.data.data.status;\n                                sessionStorage.setItem('key', JSON.stringify(ls));\n                            }).catch(err => console.log(err))\n                    }\n                }).catch(err => console.log(err));\n        }\n\n        if (u.sub_status_efa === 'active') {\n            axios.get(`http://localhost:5000/subscriptionefa/getsubcode/${u.id}`)\n                .then(subcode => {\n                    if (subcode.data !== null) {\n                        axios.get(`https://api.paystack.co/subscription/${u.id}`, { headers: { \"Authorization\": \"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\" } })\n                            .then(res => {\n                                console.log(res.data.data.status);\n                                axios.post(`http://localhost:5000/subscriptionefa/update/substatus/${u.id}`, { sub_status: res.data.data.status })\n                                    .then(sub => console.log(sub.data)).catch(err => console.log(err))\n                                let ls = JSON.parse(sessionStorage.getItem('key'));\n                                ls.sub_status_efa = res.data.data.status;\n                                sessionStorage.setItem('key', JSON.stringify(ls));\n                            })\n                    }\n                }).catch(err => console.log(err));\n        }\n\n        if (u.sub_status_rm === 'active') {\n            //also check for subscriptin for the corp user ie make a call to corporatesubscriptions and check for rm\n            axios.get(`http://localhost:5000/subscriptionrm/getsubcode/${u.id}`)\n                .then(subcode => {\n                    if (subcode.data !== null) {\n                        axios.get(`https://api.paystack.co/subscription/${subcode.data}`, { headers: { \"Authorization\": \"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\" } })\n                            .then(res => {\n                                console.log(res.data.data.status);\n                                axios.post(`http://localhost:5000/subscriptionrm/update/substatus/${u.id}`, { sub_status: res.data.data.status })\n                                    .then(sub => console.log(sub.data)).catch(err => console.log(err))\n                                let ls = JSON.parse(sessionStorage.getItem('key'));\n                                ls.sub_status_rm = res.data.data.status;\n                                sessionStorage.setItem('key', JSON.stringify(ls));\n                            })\n                    }\n                }).catch(err => console.log(err));\n        }\n\n        if (u.sub_status_lm === 'active') {\n            axios.get(`http://localhost:5000/subscriptionlm/getsubcode/${u.id}`)\n                .then(subcode => {\n                    if (subcode.data !== null) {\n                        axios.get(`https://api.paystack.co/subscription/${subcode.data}`, { headers: { \"Authorization\": \"Bearer sk_test_19f4c12e4e018a9f742e1723d42c9c8e509800b4\" } })\n                            .then(res => {\n                                console.log(res.data.data.status);\n                                axios.post(`http://localhost:5000/subscriptionlm/update/substatus/${u.id}`, { sub_status: res.data.data.status })\n                                    .then(sub => console.log(sub.data)).catch(err => console.log(err))\n                                let ls = JSON.parse(sessionStorage.getItem('key'));\n                                ls.sub_status_lm = res.data.data.status;\n                                sessionStorage.setItem('key', JSON.stringify(ls));\n                            })\n                    }\n                }).catch(err => console.log(err));\n        }\n\n\n        if (u.sub_status_compt_mgt === 'active') {\n            axios.get(`http://localhost:5000/competence/management/getuser/${u.id}`)\n                .then(res => {\n                    if (res.data !== null) {\n                        const today = Date.now();\n                        const endDate = res.data.end_date;\n                        if (today > endDate) {\n\n                            let ls = JSON.parse(sessionStorage.getItem('key'));\n                            ls.sub_status_compt_mgt = 'completed';\n                            sessionStorage.setItem('key', JSON.stringify(ls));\n\n                            axios.post(`http://localhost:5000/competence/management/update/substatus/${u.id}`, { sub_status: 'completed' })\n                                .then(sta => console.log(sta.data))\n                                .catch(err => console.log(err));\n                            \n                            //update the individuals' doc\n                            axios.post(`http://localhost:5000/individuals/update/substatus/${u.id}`, { sub_status_compt_mgt: 'completed' })\n                                .then(() => console.log(\"updated\")).catch(err => console.log(err))\n                        }\n                        console.log(res.data)\n                    }\n                }).catch(err => console.log(err))\n        }\n\n        if (u.sub_status_eas === 'completed') {\n            toast('your Education Advisory Service subscription has expired. Please subscribe to continue to receive service', 'info')\n        }\n        if (u.sub_status_efa === 'completed') {\n            toast('your Education Financial Advisory subscription has expired. Please subscribe to continue to receive service', 'info')\n        }\n        if (u.sub_status_rm === 'completed') {\n            toast('your Recruitment Management subscription has expired. Please subscribe to continue to receive service', 'info')\n        }\n        if (u.sub_status_lm === 'completed') {\n            toast('your Leadership Management subscription has expired. Please subscribe to continue to receive service', 'info')\n        }\n        if (u.sub_status_compt_mgt === 'completed') {\n            toast('your Competence Management subscription has expired. Please inform your organization pay to continue to receive service', 'info')\n        }\n        console.log(u)\n    }\n\n    render() {\n        return (\n            <AuthContext.Consumer>\n                {\n                    (context) => (\n\n                        (context.data.status == \"corporate\") ? <CorporateDashboard /> : (context.data.status == \"ADMIN\") ? <AdminDashboard /> : <IndividualDashboard />\n                    )\n                }\n            </AuthContext.Consumer>\n\n        );\n    }\n}\n\n\n\n\n\n// class CorporateDashboard extends Component{\n//     constructor(props){\n//         super(props);\n//         this.state = {\n//             org_name:'',\n//             email:'',\n//             phone:'',\n//             country:'',\n//             state:''\n//         }\n//     }\n\n//     componentDidMount(){\n//         const u = JSON.parse(sessionStorage.getItem(\"corp_key\"));\n//         if(!(u.isLogged)){\n//             window.location = \"/\"\n//         }\n//         console.log(u)\n//     }\n\n\n//     render(){\n//         return(\n//             <AuthContext.Consumer>\n//                 {\n//                         (context) => (\n//                             (context.c_data) ?\n//                             <div>\n//                                 Corporate Dashboard: {context.c_data.cname}\n//                             </div>\n//                             : window.location = \"/\"\n//                         )\n//                 }   \n//             </AuthContext.Consumer>\n//         );\n//     }\n// };\n\n\n\n\n// class IndividualDashboard extends Component{\n\n//     constructor(props){\n//         super(props);\n//         this.state = {\n//             fullname : '',\n//         }\n//     }\n\n//     componentDidMount(){\n//         const u = JSON.parse(sessionStorage.getItem(\"key\"));\n//         if(!(u.isLogged)){\n//             window.location = \"/\"\n//         }\n//         console.log(u)\n//     }\n\n//     render(){\n//         return(\n//             <AuthContext.Consumer>\n//                 {\n//                         (context) => (\n//                             (context.data) ?\n//                             <div>\n//                                 Individual Dashboard: {context.data.fullname}\n//                             </div>\n//                             : window.location = \"/\"\n//                         )\n//                 }   \n//             </AuthContext.Consumer>\n\n//         );\n//     }\n// }"]},"metadata":{},"sourceType":"module"}