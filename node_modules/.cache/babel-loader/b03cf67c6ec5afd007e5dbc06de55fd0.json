{"ast":null,"code":"import _defineProperty from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import{Card,CardContent,FormLabel,FormControl,FormGroup,FormControlLabel,FormHelperText,Checkbox}from'@material-ui/core';import{Spinner,Col}from'react-bootstrap';import Privileges from'./privileges';import SeniorPrivileges from'./senior';import JuniorPrivileges from'./junior';var CreateAdmin=function CreateAdmin(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),spinner=_useState2[0],setSpinner=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),adminTutorLevel=_useState6[0],setAdminTutorLevel=_useState6[1];var _useState7=useState({mathematics:false,physics:false,chemistry:false,biology:false,geography:false,economics:false,accounting:false,history:false,generalKnowledge:false}),_useState8=_slicedToArray(_useState7,2),seniorTutorPrivilege=_useState8[0],setSeniorTutorPrivilege=_useState8[1];var _useState9=useState({mathematics:false,socialStudies:false,integratedScience:false,businessStudies:false,generalKnowledge:false,history:false}),_useState10=_slicedToArray(_useState9,2),juniorTutorPrivilege=_useState10[0],setJuniorTutorPrivilege=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),adminType=_useState12[0],setAdminType=_useState12[1];var _useState13=useState({name:'',email:'',username:'',password:'',country:'',usertype:''}),_useState14=_slicedToArray(_useState13,2),state=_useState14[0],setState=_useState14[1];var _useState15=useState({EAS:false,EFA:false,LM:false,RM:false,LMExercise:false,RMExercise:false,AllServices:false,AllExercises:false}),_useState16=_slicedToArray(_useState15,2),privilege=_useState16[0],setPrivilege=_useState16[1];useEffect(function(){var user=JSON.parse(sessionStorage.getItem(\"key\"));setUser(user);},[]);//set privileges check box state\nvar getPrivileges=function getPrivileges(event){setPrivilege(_objectSpread({},privilege,_defineProperty({},event.target.name,event.target.checked)));};//handle other form state\nvar handleChange=function handleChange(e){var name=e.target.name;var value=e.target.value;setState(_objectSpread({},state,_defineProperty({},name,value)));};//set admin type to determine privileges to show\nvar adminUserType=function adminUserType(e){setAdminType(e.target.value);};var tutorLevel=function tutorLevel(e){setAdminTutorLevel(e.target.value);};//tutor senior privileges checkbox state\nvar getTutorPrivileges=function getTutorPrivileges(event){setSeniorTutorPrivilege(_objectSpread({},seniorTutorPrivilege,_defineProperty({},event.target.name,event.target.checked)));};// tutor junior privileges checkbox state\nvar getJuniorTutorPrivileges=function getJuniorTutorPrivileges(event){setJuniorTutorPrivilege(_objectSpread({},juniorTutorPrivilege,_defineProperty({},event.target.name,event.target.checked)));};//check username to prevent duplicates\nvar checkUsername=function checkUsername(e){var u=e.target.value;axios.post(\"http://localhost:5000/admin/check/username/\".concat(u)).then(function(res){if(res.data.length>0){alert(\"username \".concat(u,\" has been taken\"));}}).catch(function(err){return console.log(err);});};//send data to server\nvar create=function create(){setSpinner(true);var assignedPrivileges=Object.keys(privilege).filter(function(pri){return privilege[pri]===true;});var assignedSeniorTutorPrivileges=Object.keys(seniorTutorPrivilege).filter(function(tutor){return seniorTutorPrivilege[tutor]===true;});var assignedJuniorTutorPrivileges=Object.keys(juniorTutorPrivilege).filter(function(tutor){return juniorTutorPrivilege[tutor]===true;});var privileges;if(adminType===\"Admin\"){privileges=assignedPrivileges;}else if(adminType===\"Tutor\"&&adminTutorLevel===\"Senior\"){privileges=assignedSeniorTutorPrivileges;}else if(adminType===\"Tutor\"&&adminTutorLevel===\"Junior\"){privileges=assignedJuniorTutorPrivileges;}var data={name:state.name,email:state.email,username:state.username,password:state.password,country:user.country,role:adminType===\"Tutor\"?\"Tutor\":\"Admin\",tutor_level:adminTutorLevel?adminTutorLevel:null,privilege:privileges};console.log(data);axios.post(\"http://localhost:5000/admin/add\",data).then(function(res){console.log(res.data);if(res.data){alert('Admin created successfully');setState({name:'',email:'',username:'',password:''});setSpinner(false);}}).catch(function(err){console.log(err);setSpinner(false);});setPrivilege({EAS:false,EFA:false,LM:false,RM:false,LMExercise:false,RMExercise:false,AllServices:false,AllExercises:false});};return React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"container mt-5\"},React.createElement(\"div\",{className:\"row\"},React.createElement(Col,{md:{span:12,offset:3}},React.createElement(Card,{className:\"col col-sm-6 col-md-offset-3\",style:{background:'#E1E1E1'}},React.createElement(CardContent,null,React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Full Name\"),React.createElement(\"input\",{type:\"text\",name:\"name\",value:state.name,onChange:handleChange,placeholder:\"Admin Full Name\",className:\"form-control\",required:true}))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Username\"),React.createElement(\"input\",{type:\"text\",name:\"username\",value:state.username,onChange:handleChange,onBlur:checkUsername,placeholder:\"userName\",className:\"form-control\",required:true}))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Password\"),React.createElement(\"input\",{type:\"password\",name:\"password\",value:state.password,onChange:handleChange,placeholder:\"Password\",className:\"form-control\",required:true}))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Email\"),React.createElement(\"input\",{type:\"email\",name:\"email\",value:state.email,onChange:handleChange,placeholder:\"email\",className:\"form-control\",required:true}))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Amin Type\"),React.createElement(\"select\",{onChange:adminUserType,className:\"form-control\"},React.createElement(\"option\",null,\"Select Admin Type\"),React.createElement(\"option\",{value:\"Admin\"},\"Admin\"),React.createElement(\"option\",{value:\"Tutor\"},\"Tutor\")))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Country\"),React.createElement(\"input\",{type:\"text\",name:\"country\",value:user.country,disabled:true,className:\"form-control\",required:true}))),adminType===\"Tutor\"?React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Level\"),React.createElement(\"select\",{onChange:tutorLevel,className:\"form-control\"},React.createElement(\"option\",null,\"Select Tutor Level\"),React.createElement(\"option\",{value:\"Junior\"},\"Basic (Primary / Junior Sec.)\"),React.createElement(\"option\",{value:\"Senior\"},\"Post Basic ( Senior Sec.)\")))):adminType===\"Admin\"?React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(FormControl,{component:\"fieldset\"},React.createElement(FormLabel,{component:\"legend\",style:{fontWeight:'bold'}},\"Assign Privileges\"),Privileges.map(function(pri){return React.createElement(React.Fragment,null,React.createElement(FormGroup,null,React.createElement(FormControlLabel,{control:React.createElement(Checkbox,{checked:privilege.name,onChange:getPrivileges,name:pri.name,value:pri.value,color:\"primary\"}),label:pri.label})));})))):\"\",adminTutorLevel===\"Senior\"?React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(FormControl,{component:\"fieldset\"},React.createElement(FormLabel,{component:\"legend\",style:{fontWeight:'bold'}},\"Assign Tutor Privileges\"),SeniorPrivileges.map(function(tp){return React.createElement(React.Fragment,null,React.createElement(FormGroup,null,React.createElement(FormControlLabel,{control:React.createElement(Checkbox,{checked:seniorTutorPrivilege.name,onChange:getTutorPrivileges,name:tp.name,value:tp.value,color:\"primary\"}),label:tp.label})));})))):adminTutorLevel===\"Junior\"?React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(FormControl,{component:\"fieldset\"},React.createElement(FormLabel,{component:\"legend\",style:{fontWeight:'bold'}},\"Assign Tutor Privileges\"),JuniorPrivileges.map(function(tp){return React.createElement(React.Fragment,null,React.createElement(FormGroup,null,React.createElement(FormControlLabel,{control:React.createElement(Checkbox,{checked:juniorTutorPrivilege.name,onChange:getJuniorTutorPrivileges,name:tp.name,value:tp.value,color:\"primary\"}),label:tp.label})));})))):\"\",React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"button\",{className:\"btn border-0\",style:{background:'#21A5E7',color:'white',float:'right'},onClick:create},spinner?React.createElement(Spinner,{as:\"span\",animation:\"grow\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"}):\"Create\")))))))));};export default CreateAdmin;","map":{"version":3,"sources":["/Users/mac/Desktop/esgrown/src/components/admin/dashboards/country-admin/components/create-admin.js"],"names":["React","useState","useEffect","axios","Card","CardContent","FormLabel","FormControl","FormGroup","FormControlLabel","FormHelperText","Checkbox","Spinner","Col","Privileges","SeniorPrivileges","JuniorPrivileges","CreateAdmin","spinner","setSpinner","user","setUser","adminTutorLevel","setAdminTutorLevel","mathematics","physics","chemistry","biology","geography","economics","accounting","history","generalKnowledge","seniorTutorPrivilege","setSeniorTutorPrivilege","socialStudies","integratedScience","businessStudies","juniorTutorPrivilege","setJuniorTutorPrivilege","adminType","setAdminType","name","email","username","password","country","usertype","state","setState","EAS","EFA","LM","RM","LMExercise","RMExercise","AllServices","AllExercises","privilege","setPrivilege","JSON","parse","sessionStorage","getItem","getPrivileges","event","target","checked","handleChange","e","value","adminUserType","tutorLevel","getTutorPrivileges","getJuniorTutorPrivileges","checkUsername","u","post","then","res","data","length","alert","catch","err","console","log","create","assignedPrivileges","Object","keys","filter","pri","assignedSeniorTutorPrivileges","tutor","assignedJuniorTutorPrivileges","privileges","role","tutor_level","span","offset","background","fontWeight","map","label","tp","color","float"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Card, CardContent, FormLabel, FormControl, FormGroup, FormControlLabel, FormHelperText, Checkbox } from '@material-ui/core';\nimport { Spinner, Col } from 'react-bootstrap';\nimport Privileges from './privileges';\nimport SeniorPrivileges from './senior';\nimport JuniorPrivileges from './junior';\n\n\nconst CreateAdmin = () => {\n\n\n\n    const [spinner, setSpinner] = useState(false);\n    const [user, setUser] = useState('');\n    const [adminTutorLevel, setAdminTutorLevel] = useState();\n    const [seniorTutorPrivilege, setSeniorTutorPrivilege] = useState({\n        mathematics: false,\n        physics: false,\n        chemistry: false,\n        biology: false,\n        geography: false,\n        economics: false,\n        accounting: false,\n        history: false,\n        generalKnowledge: false\n    });\n    const [juniorTutorPrivilege, setJuniorTutorPrivilege] = useState({\n            mathematics: false,\n            socialStudies: false,\n            integratedScience: false,\n            businessStudies: false,\n            generalKnowledge: false,\n            history: false\n    });\n    const [adminType, setAdminType] = useState('');\n\n    const [state, setState] = useState(\n        {\n            name: '',\n            email: '',\n            username: '',\n            password: '',\n            country: '',\n            usertype: ''\n        }\n\n    );\n\n    const [privilege, setPrivilege] = useState({\n        EAS: false,\n        EFA: false,\n        LM: false,\n        RM: false,\n        LMExercise: false,\n        RMExercise: false,\n        AllServices: false,\n        AllExercises: false\n    });\n\n    useEffect(() => {\n        const user = JSON.parse(sessionStorage.getItem(\"key\"));\n        setUser(user)\n    }, []);\n\n    //set privileges check box state\n    const getPrivileges = event => {\n        setPrivilege({ ...privilege, [event.target.name]: event.target.checked });\n    };\n\n    //handle other form state\n    const handleChange = (e) => {\n        const name = e.target.name;\n        const value = e.target.value;\n\n        setState({\n            ...state,\n            [name]: value\n        })\n    }\n\n    //set admin type to determine privileges to show\n    const adminUserType = e => {\n\n        setAdminType(e.target.value);\n\n    }\n    const tutorLevel = e => {\n        setAdminTutorLevel(e.target.value)\n\n    }\n\n    //tutor senior privileges checkbox state\n    const getTutorPrivileges = event => {\n        setSeniorTutorPrivilege({ ...seniorTutorPrivilege, [event.target.name]: event.target.checked });\n    };\n    // tutor junior privileges checkbox state\n    const getJuniorTutorPrivileges = event => {\n        setJuniorTutorPrivilege({ ...juniorTutorPrivilege, [event.target.name]: event.target.checked });\n    };\n\n    //check username to prevent duplicates\n    const checkUsername = (e) => {\n        const u = e.target.value;\n\n        axios.post(`http://localhost:5000/admin/check/username/${u}`)\n            .then(res => {\n                if (res.data.length > 0) {\n                    alert(`username ${u} has been taken`)\n                }\n            })\n            .catch(err => console.log(err))\n    }\n\n    //send data to server\n    const create = () => {\n        setSpinner(true);\n\n        const assignedPrivileges = Object.keys(privilege).filter(pri => {\n            return privilege[pri] === true;\n        })\n        const assignedSeniorTutorPrivileges = Object.keys(seniorTutorPrivilege).filter(tutor => {\n            return seniorTutorPrivilege[tutor] === true;\n        });\n\n        const assignedJuniorTutorPrivileges = Object.keys(juniorTutorPrivilege).filter(tutor => {\n            return juniorTutorPrivilege[tutor] === true;\n        });\n        \n        let privileges;\n\n        if (adminType === \"Admin\") {\n\n            privileges = assignedPrivileges\n\n        } else if (adminType === \"Tutor\" && adminTutorLevel === \"Senior\") {\n\n            privileges = assignedSeniorTutorPrivileges;\n\n        } else if (adminType === \"Tutor\" && adminTutorLevel === \"Junior\") {\n\n            privileges = assignedJuniorTutorPrivileges;\n        }\n\n\n        const data = {\n            name: state.name,\n            email: state.email,\n            username: state.username,\n            password: state.password,\n            country: user.country,\n            role: adminType === \"Tutor\" ? \"Tutor\" : \"Admin\",\n            tutor_level: adminTutorLevel ? adminTutorLevel : null,\n            privilege: privileges\n\n        }\n\n        console.log(data);\n\n        axios.post(`http://localhost:5000/admin/add`, data)\n            .then(res => {\n                console.log(res.data);\n                if (res.data) {\n                    alert('Admin created successfully')\n                    setState({\n                        name: '',\n                        email: '',\n                        username: '',\n                        password: '',\n                    })\n                    setSpinner(false)\n                }\n            })\n            .catch(err => {\n                console.log(err);\n                setSpinner(false)\n\n            })\n\n        setPrivilege({\n            EAS: false,\n            EFA: false,\n            LM: false,\n            RM: false,\n            LMExercise: false,\n            RMExercise: false,\n            AllServices: false,\n            AllExercises: false\n        })\n    }\n\n    return (\n        <>\n            <div className=\"container mt-5\">\n                <div className=\"row\">\n                    <Col md={{ span: 12, offset: 3 }}>\n                        <Card className=\"col col-sm-6 col-md-offset-3\" style={{ background: '#E1E1E1' }}>\n                            <CardContent>\n                                <div className=\"row mt-3\">\n                                    <div className=\"col\">\n                                        <label style={{ fontWeight: 'bold' }}>Full Name</label>\n                                        <input type=\"text\" name=\"name\" value={state.name} onChange={handleChange} placeholder=\"Admin Full Name\" className=\"form-control\" required />\n                                    </div>\n                                </div>\n\n                                <div className=\"row mt-3\">\n                                    <div className=\"col\">\n                                        <label style={{ fontWeight: 'bold' }}>Username</label>\n                                        <input type=\"text\" name=\"username\" value={state.username} onChange={handleChange} onBlur={checkUsername} placeholder=\"userName\" className=\"form-control\" required />\n                                    </div>\n                                </div>\n\n                                <div className=\"row mt-3\">\n                                    <div className=\"col\">\n                                        <label style={{ fontWeight: 'bold' }}>Password</label>\n                                        <input type=\"password\" name=\"password\" value={state.password} onChange={handleChange} placeholder=\"Password\" className=\"form-control\" required />\n                                    </div>\n                                </div>\n\n                                <div className=\"row mt-3\">\n                                    <div className=\"col\">\n                                        <label style={{ fontWeight: 'bold' }}>Email</label>\n                                        <input type=\"email\" name=\"email\" value={state.email} onChange={handleChange} placeholder=\"email\" className=\"form-control\" required />\n                                    </div>\n                                </div>\n                                <div className=\"row mt-3\">\n                                    <div className=\"col\">\n                                        <label style={{ fontWeight: 'bold' }}>Amin Type</label>\n                                        <select onChange={adminUserType} className=\"form-control\">\n                                            <option >Select Admin Type</option>\n                                            <option value=\"Admin\">Admin</option>\n                                            <option value=\"Tutor\">Tutor</option>\n                                        </select>\n                                    </div>\n                                </div>\n\n\n                                <div className=\"row mt-3\">\n                                    <div className=\"col\">\n                                        <label style={{ fontWeight: 'bold' }}>Country</label>\n                                        <input type=\"text\" name=\"country\" value={user.country} disabled className=\"form-control\" required />\n                                    </div>\n                                </div>\n\n                                {adminType === \"Tutor\" ?\n                                    <div className=\"row mt-3\">\n                                        <div className=\"col\">\n                                            <label style={{ fontWeight: 'bold' }}>Level</label>\n                                            <select onChange={tutorLevel} className=\"form-control\">\n                                                <option>Select Tutor Level</option>\n                                                <option value=\"Junior\">Basic (Primary / Junior Sec.)</option>\n                                                <option value=\"Senior\">Post Basic ( Senior Sec.)</option>\n                                            </select>\n                                        </div>\n                                    </div>\n                                    : adminType === \"Admin\" ?\n                                        <div className=\"row mt-3\">\n                                            <div className=\"col\">\n                                                <FormControl component=\"fieldset\">\n                                                    <FormLabel component=\"legend\" style={{ fontWeight: 'bold' }}>Assign Privileges</FormLabel>\n                                                    {Privileges.map(pri => {\n                                                        return (\n                                                            <>\n                                                                <FormGroup>\n                                                                    <FormControlLabel\n                                                                        control={<Checkbox checked={privilege.name} onChange={getPrivileges} name={pri.name} value={pri.value} color=\"primary\" />}\n                                                                        label={pri.label}\n                                                                    />\n                                                                </FormGroup>\n                                                            </>\n                                                        );\n                                                    })}\n\n                                                </FormControl>\n                                            </div>\n                                        </div>\n                                        : \"\"\n                                }\n                                {adminTutorLevel === \"Senior\"\n                                    ?\n                                    <div className=\"row mt-3\">\n                                        <div className=\"col\">\n                                            <FormControl component=\"fieldset\">\n                                                <FormLabel component=\"legend\" style={{ fontWeight: 'bold' }}>Assign Tutor Privileges</FormLabel>\n                                                {\n                                                    SeniorPrivileges.map(tp => {\n                                                        return (\n                                                            <>\n                                                                <FormGroup>\n                                                                    <FormControlLabel\n                                                                        control={<Checkbox checked={seniorTutorPrivilege.name} onChange={getTutorPrivileges} name={tp.name} value={tp.value} color=\"primary\" />}\n                                                                        label={tp.label}\n                                                                    />\n                                                                </FormGroup>\n                                                            </>\n                                                        );\n                                                    })\n\n                                                }\n\n                                            </FormControl>\n\n                                        </div>\n\n                                    </div>\n                                    :\n                                    adminTutorLevel === \"Junior\"\n                                        ?\n                                        <div className=\"row mt-3\">\n                                            <div className=\"col\">\n                                                <FormControl component=\"fieldset\">\n                                                    <FormLabel component=\"legend\" style={{ fontWeight: 'bold' }}>Assign Tutor Privileges</FormLabel>\n                                                    {\n                                                        JuniorPrivileges.map(tp => {\n                                                            return (\n                                                                <>\n                                                                    <FormGroup>\n                                                                        <FormControlLabel\n                                                                            control={<Checkbox checked={juniorTutorPrivilege.name} onChange={getJuniorTutorPrivileges} name={tp.name} value={tp.value} color=\"primary\" />}\n                                                                            label={tp.label}\n                                                                        />\n                                                                    </FormGroup>\n                                                                </>\n                                                            );\n                                                        })\n\n                                                    }\n\n                                                </FormControl>\n\n                                            </div>\n\n                                        </div>\n                                        :\n                                        \"\"\n                                }\n                                <div className=\"row mt-3\">\n                                    <div className=\"col\">\n                                        <button\n                                            className=\"btn border-0\"\n                                            style={{ background: '#21A5E7', color: 'white', float: 'right' }}\n                                            onClick={create}\n                                        >\n                                            {spinner ? <Spinner as=\"span\" animation=\"grow\" size=\"sm\" role=\"status\" aria-hidden=\"true\" /> : \"Create\"}\n                                        </button>\n                                    </div>\n                                </div>\n                            </CardContent>\n                        </Card>\n                    </Col>\n                </div>\n            </div>\n        </>\n    );\n\n}\nexport default CreateAdmin;"]},"metadata":{},"sourceType":"module"}