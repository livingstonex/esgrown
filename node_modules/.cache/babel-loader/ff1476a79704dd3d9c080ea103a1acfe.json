{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Modal}from'react-bootstrap';import Pill from'./pills/pill';import axios from'axios';import toast from'../../../../util/toast';// import { data } from 'jquery';\nexport default function IntendedFieldOfStudyField(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState({level_of_edu:\"\",field_of_study:\"\"}),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),subjects=_useState6[0],setSubjects=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];// Function handling text input for Intended field of study\nvar onChangeHandler=function onChangeHandler(e){var name=e.target.name;var value=e.target.value;setData(_objectSpread({},data,_defineProperty({},name,value)));};// Function called when subjects field is changed\nvar onChangeSubjects=function onChangeSubjects(e){var value=e.target.value;if(value=='null')return;setSubjects([].concat(_toConsumableArray(subjects),[value]));};// Remove element from subjects state array\nvar remove=function remove(item){var index=subjects.indexOf(item);subjects.splice(subjects,1);setSubjects(_toConsumableArray(subjects));};// Submit function\nvar onSubmit=function onSubmit(e){var obj,res;return _regeneratorRuntime.async(function onSubmit$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();// Make sure an empty array is not submitted\nif(!(subjects.length==0||data.level_of_edu==\"\"||data.level_of_edu==\"null\")){_context.next=3;break;}return _context.abrupt(\"return\");case 3:// Construct your object\nobj={level_of_edu:data.level_of_edu,field:data.field_of_study,subjects:subjects};console.log(obj);// Attempt to make request\n_context.prev=5;setLoading(true);_context.next=9;return _regeneratorRuntime.awrap(axios.post(\"http://localhost:5000/admin/fis/add\",obj));case 9:res=_context.sent;console.log(res);if(res.status==200){setLoading(false);toast('Field Created','success');setShow(false);setSubjects([]);setData({level_of_edu:\"\",field_of_study:\"\"});}_context.next=19;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](5);setLoading(false);toast('something is wrong','warn');console.log('Error: '+_context.t0);case 19:console.log(subjects);case 20:case\"end\":return _context.stop();}}},null,null,[[5,14]]);};// console.log(data.field_of_study)\n// console.log(subjects)\nreturn React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"btn btn-primary btn-sm\",onClick:function onClick(){return setShow(true);}},React.createElement(\"i\",{className:\"fa fa-user-plus mr-2\"}),\"Field of Study\"),React.createElement(Modal,{show:show,onHide:function onHide(){return setShow(false);},\"aria-labelledby\":\"example-custom-modal-styling-title\",centered:true},React.createElement(Modal.Body,null,React.createElement(\"div\",{className:\"\"},React.createElement(\"div\",{className:\"container-fluid\"},React.createElement(\"form\",{onSubmit:onSubmit},React.createElement(\"div\",{className:\"d-flex justify-content-center\"},React.createElement(\"p\",{style:{fontFamily:'quicksand',fontSize:'14px',fontWeight:'bold'}},\"Create Intended Field of Study\")),React.createElement(\"label\",null,\"Level:\"),React.createElement(\"select\",{onChange:onChangeHandler,type:\"text\",name:\"level_of_edu\",value:data.level_of_edu,className:\"form-control text-small mb-2\",required:true},React.createElement(\"option\",{value:\"null\"},\"Select Level\"),React.createElement(\"option\",{value:\"basic\"},\"Basic\"),React.createElement(\"option\",{value:\"post-basic\"},\"Post Basic\"),React.createElement(\"option\",{value:\"undergraduate\"},\"Undergraduate\")),React.createElement(\"label\",null,\"Name of Field:\"),React.createElement(\"input\",{onChange:onChangeHandler,type:\"text\",name:\"field_of_study\",value:data.field_of_study,className:\"form-control text-small\",placeholder:\"Intended field of Study\",required:true}),React.createElement(\"label\",{className:\"mt-2\"},\"Select Subjects:\"),React.createElement(\"select\",{onChange:onChangeSubjects,name:\"subjects\",className:\"form-control text-small mb-3\",required:true},React.createElement(\"option\",{value:\"null\"},\"Select\"),React.createElement(\"option\",{value:\"mathematics\"},\"Mathematics\"),React.createElement(\"option\",{value:\"physics\"},\"Physics\"),React.createElement(\"option\",{value:\"chemistry\"},\"Chemistry\"),React.createElement(\"option\",{value:\"biology\"},\"Biology\"),React.createElement(\"option\",{value:\"geography\"},\"Geography\"),React.createElement(\"option\",{value:\"economics\"},\"Economics\"),React.createElement(\"option\",{value:\"accounting\"},\"Accounting\"),React.createElement(\"option\",{value:\"history\"},\"History\"),React.createElement(\"option\",{value:\"general knowledge & personal development\"},\"General Knowledge & Personal Development\"),React.createElement(\"option\",{value:\"integrated science\"},\"Integrated Science\"),React.createElement(\"option\",{value:\"social studies\"},\"Social Studies\"),React.createElement(\"option\",{value:\"introductory technology\"},\"Introductory Technology\"),React.createElement(\"option\",{value:\"Business Studies\"},\"Introductory \")),React.createElement(\"button\",{className:\"btn btn-primary mb-3\",type:\"submit\",disabled:loading,style:{width:'100%'}},\" Create \",loading?React.createElement(\"i\",{className:\"fa fa-spinner fa-spin\"}):\"\"),React.createElement(\"div\",{className:\"container mb-4\"},React.createElement(\"div\",{className:\"row mx-3 mt-2\"},renderPill()))))))));// Render the pills\nfunction renderPill(){return subjects.map(function(item){return React.createElement(Pill,{text:item,pop:remove});});}}","map":{"version":3,"sources":["/Users/mac/Desktop/esgrown/src/components/admin/services/components/f_study_modal.js"],"names":["React","useState","Modal","Pill","axios","toast","IntendedFieldOfStudyField","show","setShow","level_of_edu","field_of_study","data","setData","subjects","setSubjects","loading","setLoading","onChangeHandler","e","name","target","value","onChangeSubjects","remove","item","index","indexOf","splice","onSubmit","preventDefault","length","obj","field","console","log","post","res","status","fontFamily","fontSize","fontWeight","width","renderPill","map"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport {Modal} from 'react-bootstrap';\nimport Pill from './pills/pill';\nimport axios from 'axios';\nimport toast from '../../../../util/toast';\n// import { data } from 'jquery';\n\n\nexport default function IntendedFieldOfStudyField(){\n    const [show, setShow] = useState(false);\n    const [data, setData] = useState({\n                                      level_of_edu: \"\",\n                                      field_of_study:\"\",\n                                    });\n    const [subjects, setSubjects] = useState([]);\n    const [loading, setLoading] = useState(false);\n\n\n    // Function handling text input for Intended field of study\n    const onChangeHandler = (e) => {\n        var name = e.target.name;\n        var value = e.target.value;\n        setData({...data, [name]:value});\n    }\n\n    // Function called when subjects field is changed\n    const onChangeSubjects = (e) => {\n        var value = e.target.value;\n        if (value == 'null') return;\n        setSubjects([...subjects, value]);\n    }\n\n    // Remove element from subjects state array\n    const remove = (item) => {\n        const index = subjects.indexOf(item)\n        subjects.splice(subjects, 1);\n        setSubjects([...subjects])\n    }\n\n    // Submit function\n    const onSubmit = async (e) => {\n        e.preventDefault();\n        // Make sure an empty array is not submitted\n        if ((subjects.length == 0) || (data.level_of_edu == \"\") || (data.level_of_edu == \"null\")) return;\n        // Construct your object\n        const obj = {\n            level_of_edu: data.level_of_edu,\n            field: data.field_of_study,\n            subjects: subjects\n        }\n        console.log(obj)\n        // Attempt to make request\n        try{\n            setLoading(true);\n            const res = await axios.post(`http://localhost:5000/admin/fis/add`, obj);\n            console.log(res);\n            if(res.status == 200) {\n                setLoading(false);\n                toast('Field Created', 'success');\n                setShow(false);\n                setSubjects([]);\n                setData({\n                    level_of_edu: \"\",\n                    field_of_study:\"\",\n                  })\n            }\n        } catch (error) {\n            setLoading(false);\n            toast('something is wrong', 'warn');\n            console.log('Error: ' + error);\n        }\n        console.log(subjects);\n    }\n\n    \n\n    // console.log(data.field_of_study)\n    // console.log(subjects)\n    return(\n        <React.Fragment>\n                \n                <div className=\"btn btn-primary btn-sm\" onClick={ ()=>setShow(true) }><i className=\"fa fa-user-plus mr-2\"></i>Field of Study</div>\n\n            <Modal\n                show={show}\n                onHide={()=>setShow(false)}\n                aria-labelledby=\"example-custom-modal-styling-title\"\n                centered\n            >\n                <Modal.Body>\n                    {/* <input /> */}\n                    <div className=\"\">\n                        <div className=\"container-fluid\">\n                            <form onSubmit={onSubmit}>\n                                <div className=\"d-flex justify-content-center\">\n                                    <p style={{fontFamily:'quicksand', fontSize:'14px', fontWeight:'bold'}}>Create Intended Field of Study</p>\n                                </div>\n                                <label>Level:</label>\n                                {/* <input onChange={onChangeHandler} type=\"text\" name=\"level_of_edu\" value={data.level_of_edu} className=\"form-control text-small mb-2\" placeholder=\"Level of Education...\" required/> */}\n                                <select onChange={onChangeHandler} type=\"text\" name=\"level_of_edu\" value={data.level_of_edu} className=\"form-control text-small mb-2\" required>\n                                    <option value=\"null\">Select Level</option>\n                                    <option value=\"basic\">Basic</option>\n                                    <option value=\"post-basic\">Post Basic</option>\n                                    <option value=\"undergraduate\">Undergraduate</option>\n                                </select>\n                                <label>Name of Field:</label>\n                                <input onChange={onChangeHandler} type=\"text\" name=\"field_of_study\" value={data.field_of_study} className=\"form-control text-small\" placeholder=\"Intended field of Study\" required/>\n                                <label className=\"mt-2\">Select Subjects:</label>\n                                <select onChange={onChangeSubjects} name=\"subjects\" className=\"form-control text-small mb-3\" required>\n                                    <option value=\"null\">Select</option>\n                                    <option value=\"mathematics\">Mathematics</option>\n                                    <option value=\"physics\">Physics</option>\n                                    <option value=\"chemistry\">Chemistry</option>\n                                    <option value=\"biology\">Biology</option>\n                                    <option value=\"geography\">Geography</option>\n                                    <option value=\"economics\">Economics</option>\n                                    <option value=\"accounting\">Accounting</option>\n                                    <option value=\"history\">History</option>\n                                    <option value=\"general knowledge & personal development\">General Knowledge & Personal Development</option>\n                                    <option value=\"integrated science\">Integrated Science</option>\n                                    <option value=\"social studies\">Social Studies</option>\n                                    <option value=\"introductory technology\">Introductory Technology</option>\n                                    <option value=\"Business Studies\">Introductory </option>\n                                </select>\n\n                                    {/* Submit Button */}\n                                <button className=\"btn btn-primary mb-3\" type=\"submit\" disabled={loading} style={{width:'100%'}}> Create { loading ? <i className=\"fa fa-spinner fa-spin\"></i> : \"\" }</button>\n                                <div className=\"container mb-4\">\n                                    <div className=\"row mx-3 mt-2\">\n                                        {/* Place pills here */}\n                                        { renderPill() }\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </Modal.Body>\n            </Modal>\n        </React.Fragment>\n    );\n\n    // Render the pills\n    function renderPill(){\n       return subjects.map(item => (\n            <Pill text={item} pop={remove}/>\n        ));\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}