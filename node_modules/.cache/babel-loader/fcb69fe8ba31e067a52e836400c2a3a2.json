{"ast":null,"code":"import _defineProperty from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/mac/Desktop/esgrown/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import{Card,CardContent}from'@material-ui/core';import{Spinner}from'react-bootstrap';import toast from'../../../../../util/toast';var NewContent=function NewContent(_ref){var reloadContentLog=_ref.reloadContentLog;var _useState=useState({title:'',content:'',job_title:'',job_id:'',job_deadline:''}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedFile=_useState4[0],setSelectedFile=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),spinner=_useState6[0],setSpinner=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),comp=_useState8[0],setComp=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),jobs=_useState10[0],setJobs=_useState10[1];useEffect(function(){var comp=JSON.parse(sessionStorage.getItem(\"key\"));setComp(comp);getAllJobs(comp.id);},[]);var handleChange=function handleChange(e){var name=e.target.name;var value=e.target.value;setData(_objectSpread({},data,_defineProperty({},name,value)));};var handleJob=function handleJob(e){var splitValue=e.target.value;var job_title=splitValue.split('/')[0];var job_id=splitValue.split('/')[1];var job_deadline=splitValue.split('/')[2];setData(_objectSpread({},data,{job_title:job_title,job_id:job_id,job_deadline:job_deadline}));};var selectImage=function selectImage(e){var file=e.target.files[0];var reader=new FileReader();reader.onloadend=function(){setSelectedFile(reader.result);};reader.readAsDataURL(file);};var handleSubmit=function handleSubmit(e){setSpinner(true);e.preventDefault();//================= make job details is present b4 form is submited =======\nif(data.job_id===''||data.job_id==='null'){toast('you must select a job','warn');setSpinner(false);return;}else{var submitData={title:data.title,content:data.content,media:selectedFile,corp_id:comp.id,job_id:data.job_id,job_deadline:data.job_deadline,job_title:data.job_title};axios.post(\"http://localhost:5000/corpservicecontent/add\",submitData).then(function(res){console.log(res.data);setSpinner(false);reloadContentLog(comp.id);toast('new content created','success');}).catch(function(err){setSpinner(false);toast(err,'error');});setData({title:'',content:'',job_title:'',job_id:'',job_deadline:''});}};return React.createElement(React.Fragment,null,React.createElement(Card,{className:\"col col-lg-6 col-sm-6\"},React.createElement(CardContent,null,React.createElement(\"h6\",null,\"Create Recruitment Content\"),React.createElement(\"form\",{className:\"container py-4\",onSubmit:handleSubmit},React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Select a Job\"),React.createElement(\"select\",{name:\"job\",onChange:handleJob,className:\"form-control\",required:true},React.createElement(\"option\",{value:\"null\"},\"Select job\"),mapJobs()))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Content Title\"),React.createElement(\"input\",{type:\"text\",name:\"title\",value:data.title,onChange:handleChange,placeholder:\"Content Title\",className:\"form-control\",required:true}))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Image / Video\"),React.createElement(\"input\",{type:\"file\",name:\"image\",onChange:selectImage,accept:\"image/*,video/*\",className:\"form-control\",required:true}))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"label\",{style:{fontWeight:'bold'}},\"Content\"),React.createElement(\"textarea\",{name:\"content\",onChange:handleChange,className:\"form-control\",rows:\"10\",placeholder:\"content body\",required:true},data.content))),React.createElement(\"div\",{className:\"row mt-3\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"button\",{className:\"btn font-weight-light mt-3 py-2 w-100 border-0\",style:{background:'#21A5E7',color:'white'},type:\"submit\",disabled:spinner},\"Submit   \",spinner?React.createElement(\"i\",{className:\"fa fa-spinner fa-spin\"}):\"\")))))));// Get all jobs by corpid\nfunction getAllJobs(corpid){try{axios.get(\"http://localhost:5000/jobs/\".concat(corpid)).then(function(jobs){// console.log(jobs.data[0].jobs);\nsetJobs(jobs.data[0].jobs);}).catch(function(err){return console.log('Error: '+err);});}catch(error){}}// Map through all the jobs\nfunction mapJobs(){return jobs.map(function(item){return React.createElement(\"option\",{value:\"\".concat(item.title,\"/\").concat(item.job_id,\"/\").concat(item.dead_line)},item.title);});}};export default NewContent;","map":{"version":3,"sources":["/Users/mac/Desktop/esgrown/src/components/corp_dashboard_components/services/content_rm/components/new_content.js"],"names":["React","useState","useEffect","axios","Card","CardContent","Spinner","toast","NewContent","reloadContentLog","title","content","job_title","job_id","job_deadline","data","setData","selectedFile","setSelectedFile","spinner","setSpinner","comp","setComp","jobs","setJobs","JSON","parse","sessionStorage","getItem","getAllJobs","id","handleChange","e","name","target","value","handleJob","splitValue","split","selectImage","file","files","reader","FileReader","onloadend","result","readAsDataURL","handleSubmit","preventDefault","submitData","media","corp_id","post","then","res","console","log","catch","err","fontWeight","mapJobs","background","color","corpid","get","error","map","item","dead_line"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Card, CardContent } from '@material-ui/core';\nimport { Spinner } from 'react-bootstrap';\nimport toast from '../../../../../util/toast';\n\n\n\nconst NewContent = ({ reloadContentLog}) => {\n\n    const [data, setData] = useState({\n        title: '',\n        content: '',\n        job_title: '',\n        job_id: '',\n        job_deadline: ''\n    });\n\n    const [selectedFile, setSelectedFile] = useState(null);\n\n\n    const [spinner, setSpinner] = useState(false)\n\n    const [comp, setComp] = useState();\n\n    const [jobs, setJobs] = useState([])\n\n    useEffect(() => {\n        const comp = JSON.parse(sessionStorage.getItem(\"key\"));\n        setComp(comp);\n        getAllJobs(comp.id);\n\n    }, []);\n\n    const handleChange = (e) => {\n        const name = e.target.name;\n        const value = e.target.value;\n        setData({\n            ...data,\n            [name]: value\n        })\n\n    }\n\n    const handleJob = (e) => {\n        const splitValue = e.target.value;\n\n        const job_title = splitValue.split('/')[0];\n        const job_id = splitValue.split('/')[1];\n        const job_deadline = splitValue.split('/')[2];\n\n        setData({ ...data, job_title: job_title, job_id: job_id, job_deadline: job_deadline });\n    }\n\n    const selectImage = (e) => {\n        var file = e.target.files[0];\n        var reader = new FileReader();\n\n        reader.onloadend = function () {\n            setSelectedFile(reader.result)\n        }\n        reader.readAsDataURL(file);\n    }\n\n\n    const handleSubmit = (e) => {\n        setSpinner(true)\n        e.preventDefault();\n\n        //================= make job details is present b4 form is submited =======\n        if ((data.job_id === '') || (data.job_id === 'null')) {\n            toast('you must select a job', 'warn')\n            setSpinner(false)\n            return\n        } else {\n            const submitData = {\n                title: data.title,\n                content: data.content,\n                media: selectedFile,\n                corp_id: comp.id,\n                job_id: data.job_id,\n                job_deadline: data.job_deadline,\n                job_title: data.job_title\n            }\n\n\n            axios.post(`http://localhost:5000/corpservicecontent/add`, submitData)\n                .then(res => {\n                    console.log(res.data)\n                    setSpinner(false)\n                    reloadContentLog(comp.id)\n                    toast('new content created', 'success');\n                })\n                .catch(err => {\n                    setSpinner(false);\n                    toast(err, 'error')\n                });\n\n            setData({\n                title: '',\n                content: '',\n                job_title: '',\n                job_id: '',\n                job_deadline: ''\n            })\n            \n        }\n\n        \n\n    }\n\n\n    return (\n        <>\n            <Card className=\"col col-lg-6 col-sm-6\">\n                <CardContent>\n                    <h6>Create Recruitment Content</h6>\n                    <form className=\"container py-4\" onSubmit={handleSubmit}>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Select a Job</label>\n                                <select name=\"job\" onChange={handleJob} className=\"form-control\" required >\n                                    <option value=\"null\">Select job</option>\n                                    {mapJobs()}\n                                </select>\n                            </div>\n                        </div>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Content Title</label>\n                                <input type=\"text\" name=\"title\" value={data.title} onChange={handleChange} placeholder=\"Content Title\" className=\"form-control\" required />\n                            </div>\n                        </div>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Image / Video</label>\n                                <input type=\"file\" name=\"image\" onChange={selectImage} accept=\"image/*,video/*\" className=\"form-control\" required />\n                            </div>\n                        </div>\n\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <label style={{ fontWeight: 'bold' }}>Content</label>\n                                <textarea name=\"content\" onChange={handleChange} className=\"form-control\" rows=\"10\" placeholder=\"content body\" required>{data.content}</textarea>\n                            </div>\n                        </div>\n                        <div className=\"row mt-3\">\n                            <div className=\"col\">\n                                <button\n                                    className=\"btn font-weight-light mt-3 py-2 w-100 border-0\"\n                                    style={{ background: '#21A5E7', color: 'white' }}\n                                    type=\"submit\"\n                                    disabled={spinner}\n                                >\n                                    Submit   {spinner ? <i className=\"fa fa-spinner fa-spin\"></i> : \"\"}\n                                </button>\n                            </div>\n                        </div>\n                    </form>\n                </CardContent>\n            </Card>\n        </>\n    );\n\n    // Get all jobs by corpid\n    function getAllJobs(corpid) {\n        try {\n            axios.get(`http://localhost:5000/jobs/${corpid}`)\n                .then(jobs => {\n                    // console.log(jobs.data[0].jobs);\n                    setJobs(jobs.data[0].jobs);\n                })\n                .catch(err => console.log('Error: ' + err));\n        } catch (error) {\n\n        }\n    }\n\n    // Map through all the jobs\n    function mapJobs() {\n        return jobs.map(item => (\n            <option value={`${item.title}/${item.job_id}/${item.dead_line}`}>{item.title}</option>\n        ))\n    }\n\n}\nexport default NewContent;"]},"metadata":{},"sourceType":"module"}