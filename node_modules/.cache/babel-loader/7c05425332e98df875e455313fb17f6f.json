{"ast":null,"code":"import _slicedToArray from \"/Users/mac/Desktop/projekte/esgrown/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/mac/Desktop/projekte/esgrown/src/components/corp_dashboard_components/subscriptions/components/update-form.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Modal, Spinner } from 'react-bootstrap';\nimport PayStackButton from '../../../ind_dashboard_components/paystack/paystackpaymentbutton';\nimport { StylesProvider } from '@material-ui/core';\n\nconst UpdateCorp = ({\n  show,\n  onHide,\n  closeModal,\n  service\n}) => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        payModal = _useState2[0],\n        setPayModal = _useState2[1];\n\n  const _useState3 = useState(),\n        _useState4 = _slicedToArray(_useState3, 2),\n        amount = _useState4[0],\n        setAmount = _useState4[1];\n\n  const _useState5 = useState(true),\n        _useState6 = _slicedToArray(_useState5, 2),\n        spinner = _useState6[0],\n        setSpinner = _useState6[1];\n\n  const _useState7 = useState(),\n        _useState8 = _slicedToArray(_useState7, 2),\n        plan = _useState8[0],\n        setPlan = _useState8[1];\n\n  const _useState9 = useState([]),\n        _useState10 = _slicedToArray(_useState9, 2),\n        updateData = _useState10[0],\n        setUpdateData = _useState10[1];\n\n  const _useState11 = useState(),\n        _useState12 = _slicedToArray(_useState11, 2),\n        email = _useState12[0],\n        setEmail = _useState12[1];\n\n  const _useState13 = useState(),\n        _useState14 = _slicedToArray(_useState13, 2),\n        user = _useState14[0],\n        setUser = _useState14[1];\n\n  useEffect(() => {\n    const user = JSON.parse(sessionStorage.getItem('key'));\n    setUser(user);\n    axios.get(`http://localhost:5000/corporatesubscriptions/${user.id}`).then(res => {\n      // if (res.data.length > 0) {\n      //     const data = res.data.filter(r => {\n      //         return r.service === service;\n      //     })\n      setEmail(res.data.email);\n      setUpdateData(res.data);\n      setSpinner(false); // }\n    }).catch(err => console.log(err));\n  }, []);\n\n  const handleChange = e => {\n    const value = e.target.value;\n    setEmail(value);\n  };\n\n  const onChangePlan = e => {\n    const plan = e.target.value.split('/');\n    setAmount(plan[1]);\n    setPlan(plan[0]);\n  };\n\n  const update = () => {\n    setSpinner(true);\n    const data = {\n      email: email\n    };\n    axios.post(`http://localhost:5000/corporatesubscriptions/update/email/${user.id}`, data).then(res => {\n      alert(res.data);\n      setSpinner(false);\n      closeModal();\n    }).catch(err => console.log(err));\n  };\n\n  const makePmt = () => {\n    setPayModal(true);\n    closeModal();\n  };\n\n  const close = () => {\n    console.log(\"Payment modal closed\");\n    setPayModal(false);\n  };\n\n  const onSuccess = res => {\n    setPayModal(false);\n    const userr = JSON.parse(sessionStorage.getItem('key'));\n    const data = {\n      ref: res.reference\n    }; //make axios call an update ref and sub status\n\n    axios.post(`http://localhost:5000/corporatesubscriptions/update/ref/${userr.id}`, data).then(res => alert('Your payment has been received')).catch(err => console.log(err));\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(Modal, {\n    show: show,\n    onHide: onHide,\n    centered: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, updateData.length > 0 ? React.createElement(React.Fragment, null, React.createElement(Modal.Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    style: {\n      fontSize: '18px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, \"Update Corporate Subscription\"), updateData[0].sub_status ? React.createElement(\"button\", {\n    className: \"btn btn-default mt-3 py-2 border-0\",\n    disabled: true,\n    style: {\n      background: '#97ba0d',\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"PAID\") : React.createElement(\"button\", {\n    className: \"btn btn-default mt-3 py-2 border-0\",\n    style: {\n      background: '#E68722',\n      color: 'white'\n    },\n    onClick: makePmt,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"PAY\")), React.createElement(Modal.Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, \" Company Name\"), React.createElement(\"input\", {\n    type: \"text\",\n    name: \"companyName\",\n    disabled: true,\n    value: updateData[0].company_name,\n    placeholder: \"Company Name\",\n    className: \"form-control\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, \" Official Email\"), React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    value: email,\n    onChange: handleChange,\n    placeholder: \"Official Email\",\n    className: \"form-control\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"Service\"), React.createElement(\"input\", {\n    type: \"text\",\n    name: \"service\",\n    disabled: true,\n    value: updateData[0].service,\n    placeholder: \"Date of Incorporation\",\n    className: \"form-control\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, \"Date of Incorporation\"), React.createElement(\"input\", {\n    type: \"text\",\n    name: \"doi\",\n    disabled: true,\n    value: updateData[0].doi.split('T')[0],\n    placeholder: \"Date of Incorporation\",\n    className: \"form-control\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }))), updateData[0].sub_status ? \"\" : React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, \" Plan\"), React.createElement(\"select\", {\n    name: \"plan\",\n    className: \"form-control\",\n    onChange: onChangePlan,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, \"Select a Plan\"), React.createElement(\"option\", {\n    value: \"PLN_hwug5s75tf2rcqu/280000\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, \"3 Months Plan\"), React.createElement(\"option\", {\n    value: \"PLN_072a7glz3tv6fzi/455000\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, \"6 Months Plan\"), React.createElement(\"option\", {\n    value: \"PLN_wma6tld3z1g2zef/797000\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, \"1 Year Plan\"))))), React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn font-weight-light btn-primary mt-3 py-2 w-100 border-0\",\n    disabled: spinner,\n    onClick: update,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, spinner ? React.createElement(Spinner, {\n    as: \"span\",\n    animation: \"grow\",\n    size: \"sm\",\n    role: \"status\",\n    \"aria-hidden\": \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }) : \"Update\"))))) : React.createElement(Spinner, {\n    animation: \"grow\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  })), React.createElement(PayStackButton, {\n    show: payModal,\n    onHide: () => setPayModal(false),\n    close: close,\n    callback: onSuccess,\n    email: spinner ? \"\" : updateData.email,\n    amount: amount,\n    plan: plan,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }));\n};\n\nexport default UpdateCorp;","map":{"version":3,"sources":["/Users/mac/Desktop/projekte/esgrown/src/components/corp_dashboard_components/subscriptions/components/update-form.js"],"names":["React","useState","useEffect","axios","Modal","Spinner","PayStackButton","StylesProvider","UpdateCorp","show","onHide","closeModal","service","payModal","setPayModal","amount","setAmount","spinner","setSpinner","plan","setPlan","updateData","setUpdateData","email","setEmail","user","setUser","JSON","parse","sessionStorage","getItem","get","id","then","res","data","catch","err","console","log","handleChange","e","value","target","onChangePlan","split","update","post","alert","makePmt","close","onSuccess","userr","ref","reference","length","fontSize","sub_status","background","color","fontWeight","company_name","doi"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Modal, Spinner } from 'react-bootstrap';\nimport PayStackButton from '../../../ind_dashboard_components/paystack/paystackpaymentbutton';\nimport { StylesProvider } from '@material-ui/core';\n\n\n\n\nconst UpdateCorp = ({ show, onHide, closeModal, service }) => {\n\n    const [payModal, setPayModal] = useState(false);\n    const [amount, setAmount] = useState();\n    const [spinner, setSpinner] = useState(true)\n    const [plan, setPlan] = useState();\n    const [updateData, setUpdateData] = useState([])\n    const [email, setEmail] = useState()\n    const [user, setUser] = useState();\n\n\n    useEffect(() => {\n\n        const user = JSON.parse(sessionStorage.getItem('key'));\n        setUser(user)\n\n\n        axios.get(`http://localhost:5000/corporatesubscriptions/${user.id}`)\n            .then(res => {\n                // if (res.data.length > 0) {\n                //     const data = res.data.filter(r => {\n                //         return r.service === service;\n                //     })\n\n                    setEmail(res.data.email)\n                    setUpdateData(res.data);\n                    setSpinner(false)\n\n                // }\n\n            }).catch(err => console.log(err))\n    }, []);\n\n\n\n    const handleChange = (e) => {\n        const value = e.target.value;\n\n        setEmail(value)\n    };\n\n    const onChangePlan = (e) => {\n        const plan = e.target.value.split('/');\n        setAmount(plan[1]);\n        setPlan(plan[0]);\n    }\n\n    const update = () => {\n        setSpinner(true);\n        const data = {\n            email: email,\n        }\n\n        axios.post(`http://localhost:5000/corporatesubscriptions/update/email/${user.id}`, data)\n            .then(res => {\n                alert(res.data);\n                setSpinner(false)\n                closeModal()\n            })\n            .catch(err => console.log(err));\n\n    }\n\n    const makePmt = () => {\n        setPayModal(true)\n        closeModal();\n    }\n\n    const close = () => {\n        console.log(\"Payment modal closed\");\n        setPayModal(false)\n    }\n\n    const onSuccess = (res) => {\n        setPayModal(false);\n        const userr = JSON.parse(sessionStorage.getItem('key'));\n\n        const data = {\n            ref: res.reference,\n        }\n\n        //make axios call an update ref and sub status\n        axios.post(`http://localhost:5000/corporatesubscriptions/update/ref/${userr.id}`, data)\n            .then(res => alert('Your payment has been received'))\n            .catch(err => console.log(err));\n    }\n\n\n\n\n    return (\n        <>\n            <Modal show={show} onHide={onHide} centered>\n                {updateData.length > 0 ?\n                    <>\n                        <Modal.Header>\n                            <span style={{ fontSize: '18px' }}>Update Corporate Subscription</span>\n                            {\n                                updateData[0].sub_status ? <button className=\"btn btn-default mt-3 py-2 border-0\" disabled style={{ background: '#97ba0d', color: 'white' }}>PAID</button> :\n                                    <button className=\"btn btn-default mt-3 py-2 border-0\" style={{ background: '#E68722', color: 'white' }} onClick={makePmt}>PAY</button>\n                            }\n                        </Modal.Header>\n                        <Modal.Body>\n                            <div className=\"container\">\n                                <div className=\"row mt-3\">\n                                    <div className=\"col\">\n                                        <label style={{ fontWeight: 'bold' }}> Company Name</label>\n                                        <input type=\"text\" name=\"companyName\" disabled value={updateData[0].company_name} placeholder=\"Company Name\" className=\"form-control\" required />\n                                    </div>\n                                </div>\n\n                                <div className=\"row mt-3\">\n                                    <div className=\"col\">\n                                        <label style={{ fontWeight: 'bold' }}> Official Email</label>\n                                        <input type=\"email\" name=\"email\" value={email} onChange={handleChange} placeholder=\"Official Email\" className=\"form-control\" required />\n                                    </div>\n                                </div>\n\n                                <div className=\"row mt-3\">\n                                    <div className=\"col\">\n                                        <label style={{ fontWeight: 'bold' }}>Service</label>\n                                        <input type=\"text\" name=\"service\" disabled value={updateData[0].service} placeholder=\"Date of Incorporation\" className=\"form-control\" required />\n                                    </div>\n                                </div>\n                                <div className=\"row mt-3\">\n                                    <div className=\"col\">\n                                        <label style={{ fontWeight: 'bold' }}>Date of Incorporation</label>\n                                        <input type=\"text\" name=\"doi\" disabled value={\n                                            updateData[0].doi.split('T')[0]\n                                        } placeholder=\"Date of Incorporation\" className=\"form-control\" required />\n                                    </div>\n                                </div>\n\n                                {\n                                    updateData[0].sub_status ? \"\" :\n                                        <div className=\"row mt-3\">\n                                            <div className=\"col\">\n                                                <label style={{ fontWeight: 'bold' }}> Plan</label>\n                                                <select name=\"plan\" className=\"form-control\" onChange={onChangePlan} required>\n                                                    <option >Select a Plan</option>\n                                                    <option value=\"PLN_hwug5s75tf2rcqu/280000\">3 Months Plan</option>\n                                                    <option value=\"PLN_072a7glz3tv6fzi/455000\">6 Months Plan</option>\n                                                    <option value=\"PLN_wma6tld3z1g2zef/797000\">1 Year Plan</option>\n                                                </select>\n                                            </div>\n                                        </div>\n                                }\n                            </div>\n\n                            <div className=\"row mt-3\">\n                                <div className=\"col\">\n                                    <button\n                                        type=\"submit\"\n                                        className=\"btn font-weight-light btn-primary mt-3 py-2 w-100 border-0\"\n                                        disabled={spinner}\n                                        onClick={update}\n                                    >\n                                        {spinner ? <Spinner as=\"span\" animation=\"grow\" size=\"sm\" role=\"status\" aria-hidden=\"true\" /> : \"Update\"}\n                                    </button>\n                                </div>\n                            </div>\n                        </Modal.Body>\n                    </> : <Spinner animation=\"grow\" />\n                }\n            </Modal>\n\n            <PayStackButton\n                show={payModal}\n                onHide={() => setPayModal(false)}\n                close={close}\n                callback={onSuccess}\n                email={spinner ? \"\" : updateData.email}\n                amount={amount}\n                plan={plan}\n            />\n        </>\n    );\n}\nexport default UpdateCorp;"]},"metadata":{},"sourceType":"module"}