{"ast":null,"code":"import _slicedToArray from \"/Users/mac/Desktop/projekte/esgrown/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/mac/Desktop/projekte/esgrown/src/components/corp_dashboard_components/subscriptions/components/all-staff.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Modal, Spinner, Form, Button } from 'react-bootstrap';\nimport AddStaff from '../../../corp_dashboard_components/staff/components/add-staff';\n\nconst AllStaff = ({\n  show,\n  onHide,\n  amount,\n  closeStaffModal\n}) => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        staff = _useState2[0],\n        setStaff = _useState2[1];\n\n  const _useState3 = useState(),\n        _useState4 = _slicedToArray(_useState3, 2),\n        company = _useState4[0],\n        setCompany = _useState4[1];\n\n  const _useState5 = useState([]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        companystaff = _useState6[0],\n        setCompanystaff = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        addStaff = _useState8[0],\n        setAddStaff = _useState8[1];\n\n  const _useState9 = useState(false),\n        _useState10 = _slicedToArray(_useState9, 2),\n        Btn = _useState10[0],\n        setBtn = _useState10[1];\n\n  useEffect(() => {\n    const company = JSON.parse(sessionStorage.getItem('key'));\n    setCompany(company); // //make a request quest and get all company/school staff with sub inactive for subscription\n\n    axios.get(`http://localhost:5000/individuals/staff/${company.id}`).then(res => {\n      const unsubscribedStaff = res.data.filter(staff => {\n        return staff.sub_status_compt_mgt === 'inactive' || staff.sub_status_compt_mgt === 'completed';\n      });\n      setCompanystaff(unsubscribedStaff);\n\n      if (unsubscribedStaff.length === 0) {\n        setBtn(true);\n      } else {\n        setBtn(false);\n      }\n    }).catch(err => console.log(err));\n  }, []);\n\n  const refreshStaff = () => {\n    axios.get(`http://localhost:5000/individuals/staff/${company.id}`).then(res => {\n      const unsubscribedStaff = res.data.filter(staff => {\n        return staff.sub_status_compt_mgt === 'inactive' || staff.sub_status_compt_mgt === 'completed';\n      });\n      setCompanystaff(unsubscribedStaff);\n\n      if (unsubscribedStaff.length === 0) {\n        setBtn(true);\n      } else {\n        setBtn(false);\n      }\n    }).catch(err => console.log(err));\n    setAddStaff(false);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(Modal, {\n    show: show,\n    onHide: onHide,\n    centered: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(Modal.Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(Modal.Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Number of Staff: \", companystaff.length), React.createElement(Modal.Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn font-weight-light mt-3 mb-3 py-2 border-0\",\n    style: {\n      background: '#53A6E7',\n      color: 'white'\n    },\n    onClick: () => setAddStaff(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Add Staff\"))), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    style: {\n      color: '#E68824',\n      fontSize: '18px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Amount Payable: N \", amount * companystaff.length / 100), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }), company && company.org_type === 'school' && company.country == \"nigeria\" ? React.createElement(Form.Text, {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"Deselection of Teachers for this service is unavailable for your country.\") : \"\", companystaff.map(staff => {\n    return React.createElement(\"div\", {\n      className: \"row mt-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"formBasicCheckbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(Form.Check, {\n      type: \"checkbox\",\n      label: staff.fullname,\n      disabled: company && company.org_type === 'school' ? true : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    })))));\n  }), React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn font-weight-light mt-3 mb-3 py-2 w-100 border-0\",\n    style: {\n      background: '#53A6E7',\n      color: 'white'\n    },\n    onClick: () => closeStaffModal(amount * companystaff.length),\n    disabled: Btn,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"Proceed to Payment\"))))), React.createElement(AddStaff, {\n    show: addStaff,\n    onHide: () => setAddStaff(!addStaff),\n    refreshStaff: refreshStaff,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }));\n};\n\nexport default AllStaff;","map":{"version":3,"sources":["/Users/mac/Desktop/projekte/esgrown/src/components/corp_dashboard_components/subscriptions/components/all-staff.js"],"names":["React","useState","useEffect","axios","Modal","Spinner","Form","Button","AddStaff","AllStaff","show","onHide","amount","closeStaffModal","staff","setStaff","company","setCompany","companystaff","setCompanystaff","addStaff","setAddStaff","Btn","setBtn","JSON","parse","sessionStorage","getItem","get","id","then","res","unsubscribedStaff","data","filter","sub_status_compt_mgt","length","catch","err","console","log","refreshStaff","background","color","fontSize","org_type","country","map","fullname"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Modal, Spinner, Form, Button } from 'react-bootstrap';\nimport AddStaff from '../../../corp_dashboard_components/staff/components/add-staff';\n\n\n\n\nconst AllStaff = ({ show, onHide, amount, closeStaffModal }) => {\n\n    const [staff, setStaff] = useState([]);\n    const [company, setCompany] = useState()\n    const [companystaff, setCompanystaff] = useState([])\n    const [addStaff, setAddStaff] = useState(false);\n    const [Btn, setBtn] = useState(false);\n\n\n\n    useEffect(() => { \n        const company = JSON.parse(sessionStorage.getItem('key'))\n        setCompany(company);\n\n        // //make a request quest and get all company/school staff with sub inactive for subscription\n        axios.get(`http://localhost:5000/individuals/staff/${company.id}`)\n            .then(res => {\n                const unsubscribedStaff = res.data.filter(staff => {\n                    return staff.sub_status_compt_mgt === 'inactive' || staff.sub_status_compt_mgt === 'completed' ;\n                })\n                setCompanystaff(unsubscribedStaff);\n                if (unsubscribedStaff.length === 0) {\n                    setBtn(true)\n                } else {\n                    setBtn(false)\n                }\n            })\n            .catch(err => console.log(err));\n\n    }, []);\n\n\n    const refreshStaff = () => {\n\n        axios.get(`http://localhost:5000/individuals/staff/${company.id}`)\n            .then(res => {\n                const unsubscribedStaff = res.data.filter(staff => {\n                    return staff.sub_status_compt_mgt === 'inactive' || staff.sub_status_compt_mgt === 'completed';\n                })\n                setCompanystaff(unsubscribedStaff);\n                if (unsubscribedStaff.length === 0) {\n                    setBtn(true)\n                } else {\n                    setBtn(false)\n                }\n            })\n            .catch(err => console.log(err));\n            setAddStaff(false)\n\n    }\n\n\n    return (\n        <>\n            <Modal show={show} onHide={onHide} centered>\n                <Modal.Header >\n                    <Modal.Title>Number of Staff: {companystaff.length}</Modal.Title>\n                    <Modal.Title>\n                        <button\n                        type=\"submit\"\n                        className=\"btn font-weight-light mt-3 mb-3 py-2 border-0\"\n                        style={{ background: '#53A6E7', color: 'white' }}\n                        onClick={() => setAddStaff(true)}\n                        >\n                            Add Staff\n                        </button>\n                        \n                    </Modal.Title>         \n                    \n                </Modal.Header>\n                \n                <div className=\"container\">\n                    <span style={{ color:'#E68824', fontSize:'18px'}}>Amount Payable: N {(amount * companystaff.length) / 100}</span>\n                    <hr/>\n                    {\n                        company && company.org_type === 'school' && company.country == \"nigeria\" ?\n                        <Form.Text className=\"text-muted\">\n                                Deselection of Teachers for this service is unavailable for your country.\n                        </Form.Text>\n                            : \"\"}\n                    \n                    {companystaff.map(staff => {\n                        return (\n                                <div className=\"row mt-3\">\n                                    <div className=\"col\">\n                                        <Form>\n                                            <Form.Group controlId=\"formBasicCheckbox\">\n                                            <Form.Check type=\"checkbox\" label={staff.fullname} disabled={company && company.org_type === 'school'? true : false} />\n                                            </Form.Group>\n                                        </Form>\n                                    </div>\n                                </div>\n                            );\n                        })}\n                    <div className=\"row mt-3\">\n                        <div className=\"col\">\n                            <button\n                                type=\"submit\"\n                                className=\"btn font-weight-light mt-3 mb-3 py-2 w-100 border-0\"\n                                style={{ background: '#53A6E7', color: 'white' }}\n                                onClick={() => closeStaffModal((amount * companystaff.length))}\n                                disabled={Btn}\n\n                            >\n                                {/* {spinner ? <Spinner as=\"span\" animation=\"grow\" size=\"sm\" role=\"status\" aria-hidden=\"true\" /> : \"Proceed\"} */}\n                                Proceed to Payment\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </Modal>\n            <AddStaff show={addStaff} onHide={() => setAddStaff(!addStaff)} refreshStaff={refreshStaff} />\n        </>\n    );\n}\nexport default AllStaff;"]},"metadata":{},"sourceType":"module"}